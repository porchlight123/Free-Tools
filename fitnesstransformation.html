<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fitness Transformation Calculator - Custom Workout & Nutrition Plan Generator</title>
    <meta name="description" content="Get your personalized fitness transformation plan. Calculate macros, calories, and get a custom workout schedule for fat loss or muscle gain. Includes meal timing and progress timeline.">
    <meta name="keywords" content="fitness transformation calculator, body recomposition calculator, workout plan generator, macro calculator, fat loss calculator, muscle gain calculator, cutting bulking calculator">
    <link rel="canonical" href="https://yoursite.com/tools/fitness-transformation-calculator">
    
    <!-- Open Graph Tags -->
    <meta property="og:title" content="Free Fitness Transformation Calculator - Get Your Custom Plan">
    <meta property="og:description" content="Transform your body with a personalized nutrition and workout plan. Calculate perfect macros, calories, and exercise schedule for your goals.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://yoursite.com/tools/fitness-transformation-calculator">
    
    <!-- Schema Markup -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "Fitness Transformation Calculator",
        "description": "Generate personalized workout and nutrition plans for body transformation goals",
        "url": "https://yoursite.com/tools/fitness-transformation-calculator",
        "applicationCategory": "HealthApplication",
        "operatingSystem": "All",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "USD"
        }
    }
    </script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        :root {
            --primary: #6366f1;
            --primary-dark: #4f46e5;
            --secondary: #ec4899;
            --accent: #14b8a6;
            --success: #22c55e;
            --warning: #f59e0b;
            --danger: #ef4444;
            --info: #3b82f6;
            --background: #f8fafc;
            --card-bg: #ffffff;
            --text-primary: #0f172a;
            --text-secondary: #64748b;
            --border: #e2e8f0;
            --gradient-primary: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
            --gradient-secondary: linear-gradient(135deg, #ec4899 0%, #f472b6 100%);
            --gradient-success: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
            --gradient-muscle: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
            --gradient-fat: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            color: var(--text-primary);
            background-color: var(--background);
            overflow-x: hidden;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background: var(--gradient-primary);
            color: white;
            padding: 80px 24px;
            text-align: center;
            border-radius: 32px;
            margin-bottom: 40px;
            position: relative;
            overflow: hidden;
        }
        
        header::before {
            content: 'üí™';
            position: absolute;
            font-size: 200px;
            opacity: 0.1;
            top: -50px;
            right: -50px;
            transform: rotate(-15deg);
            animation: float 6s ease-in-out infinite;
        }
        
        header::after {
            content: 'üèÉ';
            position: absolute;
            font-size: 150px;
            opacity: 0.1;
            bottom: -40px;
            left: -30px;
            transform: rotate(20deg);
            animation: float 8s ease-in-out infinite reverse;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(-15deg); }
            50% { transform: translateY(-20px) rotate(-10deg); }
        }
        
        h1 {
            font-size: 3.5rem;
            margin-bottom: 16px;
            font-weight: 800;
            position: relative;
            z-index: 1;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }
        
        .subtitle {
            font-size: 1.3rem;
            opacity: 0.95;
            max-width: 600px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }
        
        .step-indicator {
            display: flex;
            justify-content: center;
            margin-bottom: 40px;
            flex-wrap: wrap;
            gap: 12px;
        }
        
        .step {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .step-number {
            width: 40px;
            height: 40px;
            background: white;
            border: 3px solid var(--border);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            transition: all 0.3s ease;
        }
        
        .step.active .step-number {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
            transform: scale(1.1);
        }
        
        .step.completed .step-number {
            background: var(--success);
            color: white;
            border-color: var(--success);
        }
        
        .step-line {
            width: 50px;
            height: 3px;
            background: var(--border);
            transition: background 0.3s ease;
        }
        
        .step.completed + .step-line {
            background: var(--success);
        }
        
        .calculator-section {
            background: var(--card-bg);
            border-radius: 32px;
            padding: 48px;
            box-shadow: 0 20px 60px rgba(99, 102, 241, 0.08);
            margin-bottom: 40px;
            position: relative;
            overflow: hidden;
        }
        
        .calculator-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--gradient-primary);
        }
        
        .section-header {
            text-align: center;
            margin-bottom: 40px;
        }
        
        .section-icon {
            width: 80px;
            height: 80px;
            background: var(--gradient-primary);
            border-radius: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
            margin: 0 auto 20px;
            box-shadow: 0 12px 30px rgba(99, 102, 241, 0.3);
        }
        
        h2 {
            font-size: 2rem;
            color: var(--text-primary);
            font-weight: 700;
            margin-bottom: 8px;
        }
        
        .section-subtitle {
            color: var(--text-secondary);
            font-size: 1.1rem;
        }
        
        /* Step 1: Basic Info */
        .input-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 24px;
            margin-bottom: 32px;
        }
        
        .input-group {
            position: relative;
        }
        
        label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: var(--text-secondary);
            font-size: 0.95rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        input[type="number"], select {
            width: 100%;
            padding: 16px 20px;
            border: 2px solid var(--border);
            border-radius: 16px;
            font-size: 16px;
            transition: all 0.3s ease;
            background: white;
        }
        
        input[type="number"]:focus, select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 4px rgba(99, 102, 241, 0.1);
        }
        
        .unit-toggle {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-bottom: 24px;
        }
        
        .unit-btn {
            padding: 12px;
            border: 2px solid var(--border);
            background: white;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }
        
        .unit-btn:hover {
            border-color: var(--primary);
            background: rgba(99, 102, 241, 0.05);
        }
        
        .unit-btn.active {
            border-color: var(--primary);
            background: var(--primary);
            color: white;
        }
        
        /* Step 2: Goals */
        .goal-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 32px;
        }
        
        .goal-card {
            padding: 24px;
            border: 3px solid var(--border);
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            background: white;
            position: relative;
            overflow: hidden;
        }
        
        .goal-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 30px rgba(0,0,0,0.1);
        }
        
        .goal-card.active {
            border-color: var(--primary);
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.05) 0%, rgba(139, 92, 246, 0.02) 100%);
        }
        
        .goal-card.active::after {
            content: '‚úì';
            position: absolute;
            top: 12px;
            right: 12px;
            width: 32px;
            height: 32px;
            background: var(--primary);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 18px;
        }
        
        .goal-icon {
            font-size: 48px;
            margin-bottom: 12px;
            display: block;
        }
        
        .goal-title {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 8px;
        }
        
        .goal-desc {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }
        
        /* Step 3: Experience */
        .experience-selector {
            max-width: 600px;
            margin: 0 auto;
        }
        
        .experience-option {
            padding: 20px;
            margin-bottom: 16px;
            border: 2px solid var(--border);
            border-radius: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        .experience-option:hover {
            border-color: var(--primary);
            background: rgba(99, 102, 241, 0.05);
        }
        
        .experience-option.active {
            border-color: var(--primary);
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.1) 0%, rgba(139, 92, 246, 0.05) 100%);
        }
        
        .experience-icon {
            width: 60px;
            height: 60px;
            background: var(--gradient-primary);
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            color: white;
            flex-shrink: 0;
        }
        
        .experience-content {
            flex: 1;
        }
        
        .experience-title {
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 4px;
        }
        
        .experience-desc {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }
        
        /* Body Fat Visual Guide */
        .bodyfat-guide {
            background: rgba(99, 102, 241, 0.05);
            border-radius: 20px;
            padding: 24px;
            margin-bottom: 32px;
        }
        
        .bodyfat-images {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 16px;
            margin-top: 16px;
        }
        
        .bodyfat-option {
            text-align: center;
            cursor: pointer;
            padding: 12px;
            border-radius: 12px;
            transition: all 0.3s ease;
        }
        
        .bodyfat-option:hover {
            background: white;
            transform: translateY(-2px);
        }
        
        .bodyfat-figure {
            width: 80px;
            height: 100px;
            margin: 0 auto 8px;
            background: var(--gradient-primary);
            border-radius: 40% 40% 50% 50% / 60% 60% 40% 40%;
            opacity: 0.8;
        }
        
        .bodyfat-label {
            font-weight: 600;
            color: var(--text-primary);
        }
        
        /* Navigation Buttons */
        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 40px;
            gap: 16px;
        }
        
        .nav-btn {
            padding: 16px 32px;
            border: none;
            border-radius: 16px;
            font-size: 1.1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .nav-btn.back {
            background: white;
            color: var(--text-primary);
            border: 2px solid var(--border);
        }
        
        .nav-btn.back:hover {
            border-color: var(--primary);
            background: rgba(99, 102, 241, 0.05);
        }
        
        .nav-btn.next {
            background: var(--gradient-primary);
            color: white;
            box-shadow: 0 8px 20px rgba(99, 102, 241, 0.3);
            flex: 1;
            justify-content: center;
        }
        
        .nav-btn.next:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 30px rgba(99, 102, 241, 0.4);
        }
        
        .nav-btn.calculate {
            background: var(--gradient-success);
            box-shadow: 0 8px 20px rgba(34, 197, 94, 0.3);
        }
        
        .nav-btn.calculate:hover {
            box-shadow: 0 12px 30px rgba(34, 197, 94, 0.4);
        }
        
        /* Results Section */
        .results-container {
            display: none;
        }
        
        .results-header {
            text-align: center;
            margin-bottom: 40px;
        }
        
        .transformation-preview {
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.05) 0%, rgba(236, 72, 153, 0.05) 100%);
            border-radius: 24px;
            padding: 40px;
            margin-bottom: 32px;
            text-align: center;
        }
        
        .timeline-visual {
            display: flex;
            justify-content: space-around;
            align-items: center;
            margin: 32px 0;
        }
        
        .timeline-point {
            text-align: center;
            position: relative;
        }
        
        .timeline-icon {
            width: 80px;
            height: 80px;
            background: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 36px;
            margin: 0 auto 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }
        
        .timeline-label {
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 4px;
        }
        
        .timeline-value {
            color: var(--text-secondary);
        }
        
        .timeline-line {
            position: absolute;
            top: 40px;
            left: 80px;
            width: 100%;
            height: 2px;
            background: var(--border);
            z-index: -1;
        }
        
        /* Nutrition Plan */
        .nutrition-plan {
            background: white;
            border-radius: 24px;
            padding: 32px;
            margin-bottom: 32px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.08);
        }
        
        .macro-display {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 24px;
            margin-bottom: 32px;
        }
        
        .macro-card {
            text-align: center;
            padding: 24px;
            border-radius: 20px;
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.1) 0%, rgba(99, 102, 241, 0.05) 100%);
            transition: transform 0.3s ease;
        }
        
        .macro-card:hover {
            transform: translateY(-4px);
        }
        
        .macro-value {
            font-size: 3rem;
            font-weight: 800;
            color: var(--primary);
            line-height: 1;
            margin-bottom: 8px;
        }
        
        .macro-label {
            font-weight: 600;
            color: var(--text-secondary);
            margin-bottom: 4px;
        }
        
        .macro-sublabel {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }
        
        .meal-timing {
            background: rgba(20, 184, 166, 0.1);
            border-radius: 16px;
            padding: 24px;
            margin-top: 24px;
        }
        
        .meal-schedule {
            display: grid;
            gap: 12px;
            margin-top: 16px;
        }
        
        .meal-item {
            display: grid;
            grid-template-columns: 100px 1fr auto;
            align-items: center;
            gap: 16px;
            padding: 16px;
            background: white;
            border-radius: 12px;
        }
        
        .meal-time {
            font-weight: 700;
            color: var(--primary);
        }
        
        .meal-info {
            color: var(--text-secondary);
        }
        
        .meal-macros {
            font-weight: 600;
            color: var(--text-primary);
            font-size: 0.9rem;
        }
        
        /* Workout Schedule */
        .workout-schedule {
            background: white;
            border-radius: 24px;
            padding: 32px;
            margin-bottom: 32px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.08);
        }
        
        .week-calendar {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 12px;
            margin-top: 24px;
        }
        
        .day-card {
            padding: 16px;
            border-radius: 16px;
            text-align: center;
            border: 2px solid var(--border);
            transition: all 0.3s ease;
            cursor: pointer;
            background: white;
        }
        
        .day-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        .day-card.workout {
            border-color: var(--primary);
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.1) 0%, rgba(99, 102, 241, 0.05) 100%);
        }
        
        .day-card.cardio {
            border-color: var(--warning);
            background: linear-gradient(135deg, rgba(245, 158, 11, 0.1) 0%, rgba(245, 158, 11, 0.05) 100%);
        }
        
        .day-card.rest {
            border-color: var(--success);
            background: linear-gradient(135deg, rgba(34, 197, 94, 0.1) 0%, rgba(34, 197, 94, 0.05) 100%);
        }
        
        .day-name {
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 8px;
        }
        
        .day-activity {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-bottom: 4px;
        }
        
        .day-duration {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }
        
        .workout-details {
            margin-top: 24px;
            padding: 20px;
            background: rgba(99, 102, 241, 0.05);
            border-radius: 16px;
        }
        
        /* Print/Save Actions */
        .action-buttons {
            display: flex;
            justify-content: center;
            gap: 16px;
            margin-top: 40px;
            flex-wrap: wrap;
        }
        
        .action-btn {
            padding: 16px 32px;
            border: none;
            border-radius: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 1rem;
        }
        
        .action-btn.print {
            background: var(--gradient-secondary);
            color: white;
            box-shadow: 0 8px 20px rgba(236, 72, 153, 0.3);
        }
        
        .action-btn.print:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 30px rgba(236, 72, 153, 0.4);
        }
        
        .action-btn.save {
            background: white;
            color: var(--primary);
            border: 2px solid var(--primary);
        }
        
        .action-btn.save:hover {
            background: var(--primary);
            color: white;
        }
        
        .action-btn.newsletter {
            background: var(--gradient-primary);
            color: white;
            box-shadow: 0 8px 20px rgba(99, 102, 241, 0.3);
        }
        
        .action-btn.newsletter:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 30px rgba(99, 102, 241, 0.4);
        }
        
        /* CTA Section */
        .cta-section {
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.05) 0%, rgba(139, 92, 246, 0.02) 100%);
            border-radius: 24px;
            padding: 48px;
            margin-top: 32px;
            text-align: center;
        }
        
        .cta-section h3 {
            font-size: 1.8rem;
            margin-bottom: 16px;
            color: var(--text-primary);
        }
        
        .cta-section p {
            font-size: 1.1rem;
            color: var(--text-secondary);
            margin-bottom: 24px;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .hidden {
            display: none;
        }
        
        /* Progress Chart */
        .progress-chart {
            height: 300px;
            margin-top: 24px;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            h1 {
                font-size: 2.5rem;
            }
            
            .calculator-section {
                padding: 32px 20px;
            }
            
            .goal-cards {
                grid-template-columns: 1fr;
            }
            
            .week-calendar {
                grid-template-columns: 1fr;
            }
            
            .macro-value {
                font-size: 2.5rem;
            }
            
            .timeline-visual {
                flex-direction: column;
                gap: 24px;
            }
            
            .timeline-line {
                display: none;
            }
        }
        
        /* Print Styles */
        @media print {
            body {
                background: white;
            }
            
            header, .step-indicator, .navigation-buttons, .action-buttons, .cta-section {
                display: none;
            }
            
            .calculator-section {
                box-shadow: none;
                page-break-inside: avoid;
            }
            
            .results-container {
                display: block !important;
            }
        }
        
        /* Loading Animation */
        .calculating {
            display: none;
            text-align: center;
            padding: 40px;
        }
        
        .calculating.show {
            display: block;
        }
        
        .spinner {
            border: 4px solid var(--border);
            border-top: 4px solid var(--primary);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Supplement Section */
        .supplement-recommendations {
            background: rgba(236, 72, 153, 0.05);
            border-radius: 16px;
            padding: 24px;
            margin-top: 32px;
        }
        
        .supplement-recommendations h4 {
            margin-bottom: 16px;
            color: var(--text-primary);
        }
        
        .supplement-list {
            display: grid;
            gap: 12px;
        }
        
        .supplement-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            background: white;
            border-radius: 12px;
        }
        
        .supplement-icon {
            width: 40px;
            height: 40px;
            background: var(--gradient-secondary);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }
        
        .supplement-info {
            flex: 1;
        }
        
        .supplement-name {
            font-weight: 600;
            color: var(--text-primary);
        }
        
        .supplement-benefit {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Fitness Transformation Calculator</h1>
            <p class="subtitle">Get your personalized workout and nutrition plan for guaranteed results</p>
        </header>
        
        <div class="step-indicator">
            <div class="step active" id="step1">
                <div class="step-number">1</div>
                <span>Basic Info</span>
            </div>
            <div class="step-line"></div>
            <div class="step" id="step2">
                <div class="step-number">2</div>
                <span>Goals</span>
            </div>
            <div class="step-line"></div>
            <div class="step" id="step3">
                <div class="step-number">3</div>
                <span>Experience</span>
            </div>
            <div class="step-line"></div>
            <div class="step" id="step4">
                <div class="step-number">4</div>
                <span>Your Plan</span>
            </div>
        </div>
        
        <!-- Step 1: Basic Info -->
        <div class="calculator-section" id="section1">
            <div class="section-header">
                <div class="section-icon">üìä</div>
                <h2>Let's Start With The Basics</h2>
                <p class="section-subtitle">We'll calculate your starting point and caloric needs</p>
            </div>
            
            <div class="unit-toggle">
                <button class="unit-btn active" onclick="setUnit('imperial')">Imperial (lbs/ft)</button>
                <button class="unit-btn" onclick="setUnit('metric')">Metric (kg/cm)</button>
            </div>
            
            <div class="input-grid">
                <div class="input-group">
                    <label for="age">Age</label>
                    <input type="number" id="age" placeholder="25" min="15" max="100" value="25">
                </div>
                <div class="input-group">
                    <label for="gender">Gender</label>
                    <select id="gender">
                        <option value="male">Male</option>
                        <option value="female">Female</option>
                    </select>
                </div>
                <div class="input-group" id="imperialWeight">
                    <label for="weightLb">Weight (lbs)</label>
                    <input type="number" id="weightLb" placeholder="170" min="80" max="400">
                </div>
                <div class="input-group hidden" id="metricWeight">
                    <label for="weightKg">Weight (kg)</label>
                    <input type="number" id="weightKg" placeholder="77" min="35" max="180">
                </div>
                <div class="input-group" id="imperialHeight">
                    <label for="heightFt">Height</label>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px;">
                        <input type="number" id="heightFt" placeholder="5 ft" min="4" max="7">
                        <input type="number" id="heightIn" placeholder="10 in" min="0" max="11">
                    </div>
                </div>
                <div class="input-group hidden" id="metricHeight">
                    <label for="heightCm">Height (cm)</label>
                    <input type="number" id="heightCm" placeholder="178" min="120" max="220">
                </div>
            </div>
            
            <div class="bodyfat-guide">
                <h3 style="margin-bottom: 12px;">Estimate Your Body Fat % (Optional)</h3>
                <p style="color: var(--text-secondary); margin-bottom: 16px;">Click the image that looks most like you, or enter manually below</p>
                <div class="bodyfat-images">
                    <div class="bodyfat-option" onclick="setBodyFat(10)">
                        <div class="bodyfat-figure" style="transform: scaleX(0.8);"></div>
                        <div class="bodyfat-label">8-10%</div>
                    </div>
                    <div class="bodyfat-option" onclick="setBodyFat(15)">
                        <div class="bodyfat-figure" style="transform: scaleX(0.9);"></div>
                        <div class="bodyfat-label">12-15%</div>
                    </div>
                    <div class="bodyfat-option" onclick="setBodyFat(20)">
                        <div class="bodyfat-figure"></div>
                        <div class="bodyfat-label">18-22%</div>
                    </div>
                    <div class="bodyfat-option" onclick="setBodyFat(25)">
                        <div class="bodyfat-figure" style="transform: scaleX(1.1);"></div>
                        <div class="bodyfat-label">23-27%</div>
                    </div>
                    <div class="bodyfat-option" onclick="setBodyFat(30)">
                        <div class="bodyfat-figure" style="transform: scaleX(1.2);"></div>
                        <div class="bodyfat-label">28-32%</div>
                    </div>
                </div>
                <div class="input-group" style="max-width: 300px; margin: 20px auto 0;">
                    <label for="bodyFat">Or Enter Manually (%)</label>
                    <input type="number" id="bodyFat" placeholder="20" min="5" max="50">
                </div>
            </div>
            
            <div class="navigation-buttons">
                <div></div>
                <button class="nav-btn next" onclick="nextStep(1)">
                    <span>Next: Choose Your Goal</span>
                    <span>‚Üí</span>
                </button>
            </div>
        </div>
        
        <!-- Step 2: Goals -->
        <div class="calculator-section hidden" id="section2">
            <div class="section-header">
                <div class="section-icon">üéØ</div>
                <h2>What's Your Primary Goal?</h2>
                <p class="section-subtitle">This will determine your calorie targets and workout focus</p>
            </div>
            
            <div class="goal-cards">
                <div class="goal-card" onclick="selectGoal('aggressive-cut')">
                    <span class="goal-icon">üî•</span>
                    <div class="goal-title">Aggressive Cut</div>
                    <div class="goal-desc">Lose 2 lbs/week<br>Fast results</div>
                </div>
                <div class="goal-card" onclick="selectGoal('moderate-cut')">
                    <span class="goal-icon">üìâ</span>
                    <div class="goal-title">Moderate Cut</div>
                    <div class="goal-desc">Lose 1 lb/week<br>Sustainable</div>
                </div>
                <div class="goal-card" onclick="selectGoal('recomp')">
                    <span class="goal-icon">‚öñÔ∏è</span>
                    <div class="goal-title">Body Recomp</div>
                    <div class="goal-desc">Maintain weight<br>Build muscle, lose fat</div>
                </div>
                <div class="goal-card" onclick="selectGoal('lean-bulk')">
                    <span class="goal-icon">üí™</span>
                    <div class="goal-title">Lean Bulk</div>
                    <div class="goal-desc">Gain 0.5 lb/week<br>Minimal fat gain</div>
                </div>
                <div class="goal-card" onclick="selectGoal('bulk')">
                    <span class="goal-icon">üèãÔ∏è</span>
                    <div class="goal-title">Bulk</div>
                    <div class="goal-desc">Gain 1 lb/week<br>Maximum muscle</div>
                </div>
            </div>
            
            <div class="navigation-buttons">
                <button class="nav-btn back" onclick="previousStep(2)">
                    <span>‚Üê</span>
                    <span>Back</span>
                </button>
                <button class="nav-btn next" onclick="nextStep(2)">
                    <span>Next: Experience Level</span>
                    <span>‚Üí</span>
                </button>
            </div>
        </div>
        
        <!-- Step 3: Experience -->
        <div class="calculator-section hidden" id="section3">
            <div class="section-header">
                <div class="section-icon">üìà</div>
                <h2>What's Your Training Experience?</h2>
                <p class="section-subtitle">This helps us create the perfect workout program for you</p>
            </div>
            
            <div class="experience-selector">
                <div class="experience-option" onclick="selectExperience('beginner')">
                    <div class="experience-icon">üå±</div>
                    <div class="experience-content">
                        <div class="experience-title">Beginner</div>
                        <div class="experience-desc">New to training or less than 6 months consistent experience</div>
                    </div>
                </div>
                <div class="experience-option" onclick="selectExperience('intermediate')">
                    <div class="experience-icon">üèÉ</div>
                    <div class="experience-content">
                        <div class="experience-title">Intermediate</div>
                        <div class="experience-desc">6 months to 2 years of consistent training</div>
                    </div>
                </div>
                <div class="experience-option" onclick="selectExperience('advanced')">
                    <div class="experience-icon">üèÜ</div>
                    <div class="experience-content">
                        <div class="experience-title">Advanced</div>
                        <div class="experience-desc">2+ years of serious training with proven results</div>
                    </div>
                </div>
            </div>
            
            <div class="calculating" id="calculating">
                <div class="spinner"></div>
                <p>Calculating your personalized plan...</p>
            </div>
            
            <div class="navigation-buttons">
                <button class="nav-btn back" onclick="previousStep(3)">
                    <span>‚Üê</span>
                    <span>Back</span>
                </button>
                <button class="nav-btn next calculate" onclick="calculatePlan()">
                    <span>Generate My Plan</span>
                    <span>üöÄ</span>
                </button>
            </div>
        </div>
        
        <!-- Results -->
        <div class="calculator-section results-container" id="section4">
            <div class="results-header">
                <div class="section-icon">üéâ</div>
                <h2>Your Personalized Transformation Plan</h2>
                <p class="section-subtitle">Follow this plan consistently for guaranteed results</p>
            </div>
            
            <div class="transformation-preview">
                <h3 style="margin-bottom: 24px;">Expected Progress Timeline</h3>
                <div class="timeline-visual">
                    <div class="timeline-point">
                        <div class="timeline-icon">üìÖ</div>
                        <div class="timeline-label">Week 4</div>
                        <div class="timeline-value" id="week4Progress">-4 lbs</div>
                        <div class="timeline-line"></div>
                    </div>
                    <div class="timeline-point">
                        <div class="timeline-icon">üìä</div>
                        <div class="timeline-label">Week 8</div>
                        <div class="timeline-value" id="week8Progress">-8 lbs</div>
                        <div class="timeline-line"></div>
                    </div>
                    <div class="timeline-point">
                        <div class="timeline-icon">üèÜ</div>
                        <div class="timeline-label">Week 12</div>
                        <div class="timeline-value" id="week12Progress">-12 lbs</div>
                    </div>
                </div>
            </div>
            
            <div class="nutrition-plan">
                <h3 style="margin-bottom: 24px; text-align: center;">Your Daily Nutrition Targets</h3>
                <div class="macro-display">
                    <div class="macro-card">
                        <div class="macro-value" id="dailyCalories">2,100</div>
                        <div class="macro-label">Calories</div>
                        <div class="macro-sublabel">Per Day</div>
                    </div>
                    <div class="macro-card">
                        <div class="macro-value" id="proteinGrams">158g</div>
                        <div class="macro-label">Protein</div>
                        <div class="macro-sublabel">4 cal/g</div>
                    </div>
                    <div class="macro-card">
                        <div class="macro-value" id="carbGrams">210g</div>
                        <div class="macro-label">Carbs</div>
                        <div class="macro-sublabel">4 cal/g</div>
                    </div>
                    <div class="macro-card">
                        <div class="macro-value" id="fatGrams">58g</div>
                        <div class="macro-label">Fats</div>
                        <div class="macro-sublabel">9 cal/g</div>
                    </div>
                </div>
                
                <canvas id="macroChart" class="progress-chart"></canvas>
                
                <div class="meal-timing">
                    <h4 style="margin-bottom: 12px;">Optimal Meal Timing</h4>
                    <div class="meal-schedule" id="mealSchedule">
                        <!-- Meal timing will be inserted here -->
                    </div>
                </div>
                
                <div class="supplement-recommendations">
                    <h4>Recommended Supplements for Your Goal</h4>
                    <div class="supplement-list" id="supplementList">
                        <!-- Supplements will be inserted here -->
                    </div>
                </div>
            </div>
            
            <div class="workout-schedule">
                <h3 style="margin-bottom: 24px; text-align: center;">Your Weekly Workout Schedule</h3>
                <div class="week-calendar" id="weekCalendar">
                    <!-- Weekly schedule will be inserted here -->
                </div>
                <div class="workout-details" id="workoutDetails">
                    <h4>Workout Structure:</h4>
                    <p id="workoutDescription"></p>
                </div>
            </div>
            
            <div class="action-buttons">
                <button class="action-btn print" onclick="printPlan()">
                    <span>üñ®Ô∏è</span>
                    <span>Print My Plan</span>
                </button>
                <button class="action-btn save" onclick="savePlan()">
                    <span>üíæ</span>
                    <span>Save as PDF</span>
                </button>
                <button class="action-btn save" onclick="emailPlan()">
                    <span>üìß</span>
                    <span>Email My Plan</span>
                </button>
            </div>
            
            <div class="cta-section">
                <h3>Want Daily Guidance & Support?</h3>
                <p>Join our free 7-Day Reset email course and build lasting healthy habits with daily action steps, community support, and expert guidance.</p>
                <button class="action-btn newsletter" onclick="signupNewsletter()">
                    <span>Start Your 7-Day Reset</span>
                    <span>‚Üí</span>
                </button>
            </div>
        </div>
    </div>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <script>
        // Global variables
        let currentUnit = 'imperial';
        let selectedGoal = '';
        let selectedExperience = '';
        let macroChart = null;
        
        // Set unit system
        function setUnit(unit) {
            currentUnit = unit;
            
            document.querySelectorAll('.unit-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            if (unit === 'imperial') {
                document.getElementById('imperialWeight').classList.remove('hidden');
                document.getElementById('imperialHeight').classList.remove('hidden');
                document.getElementById('metricWeight').classList.add('hidden');
                document.getElementById('metricHeight').classList.add('hidden');
            } else {
                document.getElementById('imperialWeight').classList.add('hidden');
                document.getElementById('imperialHeight').classList.add('hidden');
                document.getElementById('metricWeight').classList.remove('hidden');
                document.getElementById('metricHeight').classList.remove('hidden');
            }
        }
        
        // Set body fat from visual guide
        function setBodyFat(percentage) {
            document.getElementById('bodyFat').value = percentage;
            
            // Visual feedback
            document.querySelectorAll('.bodyfat-option').forEach(option => {
                option.style.background = '';
            });
            event.target.closest('.bodyfat-option').style.background = 'rgba(99, 102, 241, 0.1)';
        }
        
        // Select goal
        function selectGoal(goal) {
            selectedGoal = goal;
            
            document.querySelectorAll('.goal-card').forEach(card => {
                card.classList.remove('active');
            });
            event.target.closest('.goal-card').classList.add('active');
        }
        
        // Select experience
        function selectExperience(experience) {
            selectedExperience = experience;
            
            document.querySelectorAll('.experience-option').forEach(option => {
                option.classList.remove('active');
            });
            event.target.closest('.experience-option').classList.add('active');
        }
        
        // Navigation
        function nextStep(currentStep) {
            // Validate current step
            if (currentStep === 1) {
                const weight = currentUnit === 'imperial' 
                    ? document.getElementById('weightLb').value 
                    : document.getElementById('weightKg').value;
                const height = currentUnit === 'imperial'
                    ? document.getElementById('heightFt').value
                    : document.getElementById('heightCm').value;
                    
                if (!weight || !height) {
                    alert('Please fill in your weight and height');
                    return;
                }
            } else if (currentStep === 2 && !selectedGoal) {
                alert('Please select your goal');
                return;
            }
            
            // Hide current section
            document.getElementById(`section${currentStep}`).classList.add('hidden');
            // Show next section
            document.getElementById(`section${currentStep + 1}`).classList.remove('hidden');
            
            // Update step indicator
            document.getElementById(`step${currentStep}`).classList.remove('active');
            document.getElementById(`step${currentStep}`).classList.add('completed');
            document.getElementById(`step${currentStep + 1}`).classList.add('active');
        }
        
        function previousStep(currentStep) {
            // Hide current section
            document.getElementById(`section${currentStep}`).classList.add('hidden');
            // Show previous section
            document.getElementById(`section${currentStep - 1}`).classList.remove('hidden');
            
            // Update step indicator
            document.getElementById(`step${currentStep}`).classList.remove('active');
            document.getElementById(`step${currentStep - 1}`).classList.remove('completed');
            document.getElementById(`step${currentStep - 1}`).classList.add('active');
        }
        
        // Calculate the complete plan
        function calculatePlan() {
            if (!selectedExperience) {
                alert('Please select your experience level');
                return;
            }
            
            // Show loading animation
            document.getElementById('calculating').classList.add('show');
            
            setTimeout(() => {
                // Get user data
                const age = parseInt(document.getElementById('age').value);
                const gender = document.getElementById('gender').value;
                let weight, height;
                
                if (currentUnit === 'imperial') {
                    weight = parseFloat(document.getElementById('weightLb').value) * 0.453592; // Convert to kg
                    const feet = parseInt(document.getElementById('heightFt').value);
                    const inches = parseInt(document.getElementById('heightIn').value) || 0;
                    height = ((feet * 12) + inches) * 2.54; // Convert to cm
                } else {
                    weight = parseFloat(document.getElementById('weightKg').value);
                    height = parseFloat(document.getElementById('heightCm').value);
                }
                
                const bodyFat = parseFloat(document.getElementById('bodyFat').value) || 0;
                
                // Calculate BMR using Mifflin-St Jeor
                let bmr;
                if (gender === 'male') {
                    bmr = (10 * weight) + (6.25 * height) - (5 * age) + 5;
                } else {
                    bmr = (10 * weight) + (6.25 * height) - (5 * age) - 161;
                }
                
                // Activity multiplier based on goal and experience
                let activityMultiplier = 1.5; // Default moderate
                if (selectedGoal.includes('cut')) {
                    activityMultiplier = 1.4;
                } else if (selectedGoal.includes('bulk')) {
                    activityMultiplier = 1.6;
                }
                
                if (selectedExperience === 'advanced') {
                    activityMultiplier += 0.1;
                }
                
                // Calculate TDEE
                const tdee = bmr * activityMultiplier;
                
                // Adjust calories based on goal
                let targetCalories = tdee;
                let weeklyChange = 0;
                
                switch(selectedGoal) {
                    case 'aggressive-cut':
                        targetCalories = tdee - 1000;
                        weeklyChange = -2;
                        break;
                    case 'moderate-cut':
                        targetCalories = tdee - 500;
                        weeklyChange = -1;
                        break;
                    case 'recomp':
                        targetCalories = tdee;
                        weeklyChange = 0;
                        break;
                    case 'lean-bulk':
                        targetCalories = tdee + 250;
                        weeklyChange = 0.5;
                        break;
                    case 'bulk':
                        targetCalories = tdee + 500;
                        weeklyChange = 1;
                        break;
                }
                
                // Calculate macros
                let proteinMultiplier = 1.0; // grams per lb bodyweight
                if (selectedGoal.includes('cut')) {
                    proteinMultiplier = 1.2;
                } else if (selectedGoal.includes('bulk')) {
                    proteinMultiplier = 0.9;
                }
                
                const proteinGrams = Math.round((weight * 2.20462) * proteinMultiplier);
                const proteinCalories = proteinGrams * 4;
                
                let fatPercentage = 0.25;
                if (selectedGoal.includes('cut')) {
                    fatPercentage = 0.20;
                } else if (selectedGoal.includes('bulk')) {
                    fatPercentage = 0.30;
                }
                
                const fatCalories = targetCalories * fatPercentage;
                const fatGrams = Math.round(fatCalories / 9);
                
                const carbCalories = targetCalories - proteinCalories - fatCalories;
                const carbGrams = Math.round(carbCalories / 4);
                
                // Update nutrition display
                document.getElementById('dailyCalories').textContent = Math.round(targetCalories).toLocaleString();
                document.getElementById('proteinGrams').textContent = proteinGrams + 'g';
                document.getElementById('carbGrams').textContent = carbGrams + 'g';
                document.getElementById('fatGrams').textContent = fatGrams + 'g';
                
                // Update timeline
                document.getElementById('week4Progress').textContent = weeklyChange === 0 ? 'Recomp' : (weeklyChange * 4 > 0 ? '+' : '') + (weeklyChange * 4) + ' lbs';
                document.getElementById('week8Progress').textContent = weeklyChange === 0 ? 'Recomp' : (weeklyChange * 8 > 0 ? '+' : '') + (weeklyChange * 8) + ' lbs';
                document.getElementById('week12Progress').textContent = weeklyChange === 0 ? 'Recomp' : (weeklyChange * 12 > 0 ? '+' : '') + (weeklyChange * 12) + ' lbs';
                
                // Generate meal schedule
                generateMealSchedule(targetCalories, proteinGrams, carbGrams, fatGrams);
                
                // Generate supplement recommendations
                generateSupplements(selectedGoal);
                
                // Generate workout schedule
                generateWorkoutSchedule(selectedExperience, selectedGoal);
                
                // Create macro chart
                createMacroChart(proteinCalories, carbCalories, fatCalories);
                
                // Hide loading, show results
                document.getElementById('calculating').classList.remove('show');
                document.getElementById('section3').classList.add('hidden');
                document.getElementById('section4').style.display = 'block';
                document.getElementById('step3').classList.remove('active');
                document.getElementById('step3').classList.add('completed');
                document.getElementById('step4').classList.add('active');
                
                // Scroll to results
                document.getElementById('section4').scrollIntoView({ behavior: 'smooth', block: 'start' });
            }, 1500);
        }
        
        // Generate meal schedule
        function generateMealSchedule(calories, protein, carbs, fats) {
            const mealSchedule = document.getElementById('mealSchedule');
            
            const meals = [
                { 
                    time: '7:00 AM', 
                    name: 'Breakfast', 
                    calories: Math.round(calories * 0.25),
                    protein: Math.round(protein * 0.25),
                    carbs: Math.round(carbs * 0.30),
                    fats: Math.round(fats * 0.20)
                },
                { 
                    time: '10:00 AM', 
                    name: 'Snack', 
                    calories: Math.round(calories * 0.10),
                    protein: Math.round(protein * 0.15),
                    carbs: Math.round(carbs * 0.10),
                    fats: Math.round(fats * 0.10)
                },
                { 
                    time: '1:00 PM', 
                    name: 'Lunch', 
                    calories: Math.round(calories * 0.30),
                    protein: Math.round(protein * 0.30),
                    carbs: Math.round(carbs * 0.25),
                    fats: Math.round(fats * 0.35)
                },
                { 
                    time: '4:00 PM', 
                    name: 'Pre-Workout', 
                    calories: Math.round(calories * 0.10),
                    protein: Math.round(protein * 0.10),
                    carbs: Math.round(carbs * 0.20),
                    fats: Math.round(fats * 0.05)
                },
                { 
                    time: '7:00 PM', 
                    name: 'Dinner', 
                    calories: Math.round(calories * 0.25),
                    protein: Math.round(protein * 0.20),
                    carbs: Math.round(carbs * 0.15),
                    fats: Math.round(fats * 0.30)
                }
            ];
            
            mealSchedule.innerHTML = meals.map(meal => `
                <div class="meal-item">
                    <div class="meal-time">${meal.time}</div>
                    <div class="meal-info">${meal.name}</div>
                    <div class="meal-macros">
                        ${meal.calories} cal | P: ${meal.protein}g | C: ${meal.carbs}g | F: ${meal.fats}g
                    </div>
                </div>
            `).join('');
        }
        
        // Generate supplement recommendations
        function generateSupplements(goal) {
            const supplementList = document.getElementById('supplementList');
            let supplements = [];
            
            if (goal.includes('cut')) {
                supplements = [
                    { icon: 'P', name: 'Whey Protein', benefit: 'Preserve muscle during deficit' },
                    { icon: 'C', name: 'Caffeine', benefit: 'Boost metabolism & energy' },
                    { icon: 'O', name: 'Omega-3', benefit: 'Support fat loss & recovery' }
                ];
            } else if (goal.includes('bulk')) {
                supplements = [
                    { icon: 'C', name: 'Creatine', benefit: 'Increase strength & muscle' },
                    { icon: 'P', name: 'Whey Protein', benefit: 'Support muscle growth' },
                    { icon: 'M', name: 'Multivitamin', benefit: 'Fill nutritional gaps' }
                ];
            } else {
                supplements = [
                    { icon: 'P', name: 'Whey Protein', benefit: 'Support muscle maintenance' },
                    { icon: 'C', name: 'Creatine', benefit: 'Improve performance' },
                    { icon: 'O', name: 'Omega-3', benefit: 'Overall health & recovery' }
                ];
            }
            
            supplementList.innerHTML = supplements.map(supp => `
                <div class="supplement-item">
                    <div class="supplement-icon">${supp.icon}</div>
                    <div class="supplement-info">
                        <div class="supplement-name">${supp.name}</div>
                        <div class="supplement-benefit">${supp.benefit}</div>
                    </div>
                </div>
            `).join('');
        }
        
        // Generate workout schedule
        function generateWorkoutSchedule(experience, goal) {
            const weekCalendar = document.getElementById('weekCalendar');
            const workoutDetails = document.getElementById('workoutDetails');
            
            let schedule = [];
            let description = '';
            
            if (experience === 'beginner') {
                schedule = [
                    { day: 'Mon', type: 'workout', activity: 'Full Body A', duration: '45 min' },
                    { day: 'Tue', type: 'cardio', activity: 'Light Cardio', duration: '20 min' },
                    { day: 'Wed', type: 'rest', activity: 'Rest Day', duration: 'Recovery' },
                    { day: 'Thu', type: 'workout', activity: 'Full Body B', duration: '45 min' },
                    { day: 'Fri', type: 'rest', activity: 'Rest Day', duration: 'Recovery' },
                    { day: 'Sat', type: 'workout', activity: 'Full Body C', duration: '45 min' },
                    { day: 'Sun', type: 'rest', activity: 'Active Rest', duration: 'Light walk' }
                ];
                description = 'Full body workouts 3x per week focusing on compound movements. Each session includes squats, presses, and pulls. Start with lighter weights and focus on form.';
            } else if (experience === 'intermediate') {
                schedule = [
                    { day: 'Mon', type: 'workout', activity: 'Upper Body', duration: '60 min' },
                    { day: 'Tue', type: 'workout', activity: 'Lower Body', duration: '60 min' },
                    { day: 'Wed', type: 'cardio', activity: 'HIIT Cardio', duration: '20 min' },
                    { day: 'Thu', type: 'workout', activity: 'Upper Body', duration: '60 min' },
                    { day: 'Fri', type: 'workout', activity: 'Lower Body', duration: '60 min' },
                    { day: 'Sat', type: 'cardio', activity: 'Steady Cardio', duration: '30 min' },
                    { day: 'Sun', type: 'rest', activity: 'Rest Day', duration: 'Recovery' }
                ];
                description = 'Upper/Lower split 4x per week with progressive overload. Includes compound and isolation exercises. Add cardio based on goals.';
            } else {
                schedule = [
                    { day: 'Mon', type: 'workout', activity: 'Push', duration: '75 min' },
                    { day: 'Tue', type: 'workout', activity: 'Pull', duration: '75 min' },
                    { day: 'Wed', type: 'workout', activity: 'Legs', duration: '75 min' },
                    { day: 'Thu', type: 'rest', activity: 'Rest', duration: 'Recovery' },
                    { day: 'Fri', type: 'workout', activity: 'Push', duration: '75 min' },
                    { day: 'Sat', type: 'workout', activity: 'Pull + Legs', duration: '90 min' },
                    { day: 'Sun', type: 'rest', activity: 'Active Rest', duration: 'Mobility' }
                ];
                description = 'Push/Pull/Legs split 5-6x per week with high volume. Advanced techniques like drop sets and supersets. Periodized programming recommended.';
            }
            
            // Adjust cardio based on goal
            if (goal.includes('cut')) {
                schedule.forEach(day => {
                    if (day.type === 'cardio') {
                        day.duration = '30-45 min';
                    }
                });
            } else if (goal.includes('bulk')) {
                schedule = schedule.map(day => {
                    if (day.type === 'cardio') {
                        return { ...day, type: 'rest', activity: 'Active Rest', duration: 'Light walk' };
                    }
                    return day;
                });
            }
            
            weekCalendar.innerHTML = schedule.map(day => `
                <div class="day-card ${day.type}">
                    <div class="day-name">${day.day}</div>
                    <div class="day-activity">${day.activity}</div>
                    <div class="day-duration">${day.duration}</div>
                </div>
            `).join('');
            
            workoutDetails.innerHTML = `
                <h4>Workout Structure:</h4>
                <p>${description}</p>
            `;
        }
        
        // Create macro chart
        function createMacroChart(proteinCal, carbCal, fatCal) {
            const ctx = document.getElementById('macroChart').getContext('2d');
            
            if (macroChart) {
                macroChart.destroy();
            }
            
            const total = proteinCal + carbCal + fatCal;
            
            macroChart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['Protein', 'Carbs', 'Fats'],
                    datasets: [{
                        data: [
                            ((proteinCal / total) * 100).toFixed(1),
                            ((carbCal / total) * 100).toFixed(1),
                            ((fatCal / total) * 100).toFixed(1)
                        ],
                        backgroundColor: [
                            'rgba(239, 68, 68, 0.8)',
                            'rgba(59, 130, 246, 0.8)',
                            'rgba(245, 158, 11, 0.8)'
                        ],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                padding: 20,
                                font: {
                                    size: 14
                                }
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return context.label + ': ' + context.parsed + '%';
                                }
                            }
                        }
                    }
                }
            });
        }
        
        // Print plan
        function printPlan() {
            window.print();
        }
        
        // Save plan (simulated)
        function savePlan() {
            // In a real implementation, would use jsPDF or similar
            const plan = {
                calories: document.getElementById('dailyCalories').textContent,
                protein: document.getElementById('proteinGrams').textContent,
                carbs: document.getElementById('carbGrams').textContent,
                fats: document.getElementById('fatGrams').textContent,
                goal: selectedGoal,
                experience: selectedExperience
            };
            
            // Create a blob and download
            const planText = `
PERSONALIZED FITNESS TRANSFORMATION PLAN
=======================================

Daily Nutrition Targets:
- Calories: ${plan.calories}
- Protein: ${plan.protein}
- Carbs: ${plan.carbs}
- Fats: ${plan.fats}

Goal: ${plan.goal.replace('-', ' ').toUpperCase()}
Experience Level: ${plan.experience.toUpperCase()}

For your complete meal timing and workout schedule, 
please print this page or visit the calculator again.

Join our 7-Day Reset newsletter for daily support:
https://yoursite.com/newsletter
            `;
            
            const blob = new Blob([planText], { type: 'text/plain' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'fitness-transformation-plan.txt';
            a.click();
            window.URL.revokeObjectURL(url);
        }
        
        // Email plan
        function emailPlan() {
            const email = prompt('Enter your email to receive your transformation plan:');
            if (email && email.includes('@')) {
                // In a real implementation, would send to your backend
                alert(`Success! Your personalized transformation plan has been sent to ${email}. Check your inbox in the next few minutes.`);
                
                // Track conversion
                console.log('Email plan sent to:', email);
                
                // Could redirect to newsletter signup with email pre-filled
                // window.location.href = `/newsletter?email=${encodeURIComponent(email)}&source=fitness-calculator`;
            }
        }
        
        // Newsletter signup
        function signupNewsletter() {
            window.location.href = '/newsletter?source=fitness-calculator&utm_campaign=7dr';
        }
        
        // Initialize on load
        document.addEventListener('DOMContentLoaded', function() {
            // Add smooth scrolling
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    const target = document.querySelector(this.getAttribute('href'));
                    if (target) {
                        target.scrollIntoView({ behavior: 'smooth' });
                    }
                });
            });
            
            // Add Enter key support for inputs
            document.querySelectorAll('input').forEach(input => {
                input.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        const currentSection = this.closest('.calculator-section');
                        const nextBtn = currentSection.querySelector('.nav-btn.next');
                        if (nextBtn) {
                            nextBtn.click();
                        }
                    }
                });
            });
            
            // Track calculator usage
            console.log('Fitness transformation calculator loaded');
        });
    </script>
</body>
</html>