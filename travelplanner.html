<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ultimate Travel Planner 2024: Smart Packing Lists & Trip Essentials</title>
    <meta name="description" content="Create personalized packing lists in seconds. Free luxury travel planner generates custom checklists based on destination, weather, activities & trip length. Never forget essentials again.">
    <meta name="keywords" content="travel packing list generator, trip planner, vacation checklist, travel essentials, packing calculator, luxury travel planner, family travel planner">
    <link rel="canonical" href="https://yoursite.com/tools/travel-planner">
    
    <!-- Open Graph Tags -->
    <meta property="og:title" content="Ultimate Travel Planner - Never Forget Travel Essentials Again">
    <meta property="og:description" content="Generate personalized packing lists based on your destination, activities, and travel style. Free tool creates custom checklists in seconds.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://yoursite.com/tools/travel-planner">
    
    <!-- Schema Markup -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "Ultimate Travel Planner",
        "description": "Professional travel planning tool for creating customized packing lists and trip essentials",
        "url": "https://yoursite.com/tools/travel-planner",
        "applicationCategory": "TravelApplication",
        "operatingSystem": "All",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "USD"
        }
    }
    </script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        :root {
            --luxury-gold: #D4AF37;
            --deep-navy: #0A1628;
            --midnight-blue: #1E3A5F;
            --champagne: #F7E7CE;
            --pearl-white: #FDFBF7;
            --silver-gray: #B8B8B8;
            --charcoal: #2C3E50;
            --accent-coral: #FF6B6B;
            --soft-mint: #4ECDC4;
            --warm-beige: #F5E6D3;
            --shadow-light: 0 2px 10px rgba(0,0,0,0.08);
            --shadow-medium: 0 5px 20px rgba(0,0,0,0.12);
            --shadow-luxury: 0 10px 40px rgba(0,0,0,0.15);
            --shadow-hover: 0 15px 50px rgba(0,0,0,0.2);
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        body {
            font-family: 'Helvetica Neue', -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif;
            line-height: 1.6;
            color: var(--charcoal);
            background: linear-gradient(135deg, var(--pearl-white) 0%, var(--warm-beige) 100%);
            min-height: 100vh;
        }
        
        /* Elegant Header */
        .header {
            background: linear-gradient(135deg, var(--deep-navy) 0%, var(--midnight-blue) 100%);
            color: white;
            padding: 60px 20px;
            position: relative;
            overflow: hidden;
        }
        
        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -20%;
            width: 800px;
            height: 800px;
            background: radial-gradient(circle, rgba(212, 175, 55, 0.1) 0%, transparent 70%);
            animation: float 20s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-30px) rotate(180deg); }
        }
        
        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            text-align: center;
            position: relative;
            z-index: 1;
        }
        
        h1 {
            font-size: 3rem;
            font-weight: 300;
            letter-spacing: 2px;
            margin-bottom: 16px;
            text-transform: uppercase;
            background: linear-gradient(90deg, white 0%, var(--luxury-gold) 50%, white 100%);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: shimmer 3s linear infinite;
        }
        
        @keyframes shimmer {
            0% { background-position: -1000px 0; }
            100% { background-position: 1000px 0; }
        }
        
        .subtitle {
            font-size: 1.125rem;
            font-weight: 300;
            opacity: 0.9;
            letter-spacing: 1px;
        }
        
        /* Start Over Button */
        .start-over-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 2px solid rgba(255, 255, 255, 0.3);
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 500;
            letter-spacing: 0.5px;
            transition: var(--transition);
            backdrop-filter: blur(10px);
        }
        
        .start-over-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            border-color: rgba(255, 255, 255, 0.5);
            transform: translateY(-2px);
        }
        
        /* Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
        }
        
        /* Progress Bar */
        .progress-container {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: var(--shadow-luxury);
            margin: -40px auto 40px;
            max-width: 900px;
            position: relative;
            z-index: 10;
        }
        
        .progress-steps {
            display: flex;
            justify-content: space-between;
            position: relative;
        }
        
        .progress-line {
            position: absolute;
            top: 25px;
            left: 50px;
            right: 50px;
            height: 2px;
            background: var(--silver-gray);
            opacity: 0.3;
        }
        
        .progress-line-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--luxury-gold) 0%, var(--soft-mint) 100%);
            width: 0%;
            transition: width 0.6s ease;
        }
        
        .step {
            position: relative;
            text-align: center;
            flex: 1;
        }
        
        .step-circle {
            width: 50px;
            height: 50px;
            background: white;
            border: 2px solid var(--silver-gray);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 12px;
            font-size: 1.25rem;
            transition: var(--transition);
        }
        
        .step.active .step-circle {
            border-color: var(--luxury-gold);
            background: var(--luxury-gold);
            color: white;
            transform: scale(1.1);
            box-shadow: 0 0 0 4px rgba(212, 175, 55, 0.2);
        }
        
        .step.completed .step-circle {
            background: var(--soft-mint);
            border-color: var(--soft-mint);
            color: white;
        }
        
        .step-label {
            font-size: 0.875rem;
            font-weight: 500;
            color: var(--charcoal);
            letter-spacing: 0.5px;
        }
        
        /* Form Sections */
        .form-section {
            background: white;
            border-radius: 20px;
            padding: 48px;
            box-shadow: var(--shadow-luxury);
            margin-bottom: 32px;
            display: none;
            animation: fadeIn 0.5s ease;
        }
        
        .form-section.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .section-title {
            font-size: 2rem;
            font-weight: 300;
            color: var(--deep-navy);
            margin-bottom: 32px;
            text-align: center;
            letter-spacing: 1px;
        }
        
        /* Travel Type Selection (Domestic/International) */
        .travel-type-selector {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-bottom: 40px;
        }
        
        .travel-type-option {
            flex: 1;
            max-width: 300px;
            padding: 30px;
            background: var(--pearl-white);
            border: 3px solid transparent;
            border-radius: 16px;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .travel-type-option:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-medium);
        }
        
        .travel-type-option.selected {
            border-color: var(--luxury-gold);
            background: linear-gradient(135deg, var(--champagne) 0%, var(--pearl-white) 100%);
        }
        
        .travel-type-icon {
            font-size: 3rem;
            margin-bottom: 16px;
        }
        
        .travel-type-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--deep-navy);
            margin-bottom: 8px;
        }
        
        .travel-type-desc {
            font-size: 0.875rem;
            color: var(--charcoal);
            opacity: 0.8;
        }
        
        /* Traveler Count Inputs */
        .traveler-inputs {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 24px;
            margin-bottom: 32px;
        }
        
        .traveler-group {
            background: var(--pearl-white);
            padding: 24px;
            border-radius: 12px;
            text-align: center;
        }
        
        .traveler-label {
            display: block;
            font-weight: 600;
            color: var(--deep-navy);
            margin-bottom: 12px;
            font-size: 1rem;
        }
        
        .traveler-sublabel {
            display: block;
            font-size: 0.75rem;
            color: var(--charcoal);
            opacity: 0.7;
            margin-bottom: 16px;
        }
        
        .number-input-wrapper {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 16px;
        }
        
        .number-btn {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            border: 2px solid var(--silver-gray);
            background: white;
            color: var(--charcoal);
            font-size: 1.25rem;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .number-btn:hover {
            border-color: var(--luxury-gold);
            background: var(--luxury-gold);
            color: white;
        }
        
        .number-display {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--deep-navy);
            min-width: 40px;
            text-align: center;
        }
        
        /* Trip Type Selection */
        .trip-types {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 32px;
        }
        
        .trip-type-card {
            background: var(--pearl-white);
            border: 2px solid transparent;
            border-radius: 16px;
            padding: 32px 24px;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }
        
        .trip-type-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-hover);
        }
        
        .trip-type-card.selected {
            border-color: var(--luxury-gold);
            background: linear-gradient(135deg, var(--champagne) 0%, var(--pearl-white) 100%);
        }
        
        .trip-type-card.selected::after {
            content: '‚úì';
            position: absolute;
            top: 16px;
            right: 16px;
            width: 30px;
            height: 30px;
            background: var(--luxury-gold);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }
        
        .trip-icon {
            font-size: 3rem;
            margin-bottom: 16px;
        }
        
        .trip-name {
            font-size: 1.125rem;
            font-weight: 500;
            color: var(--deep-navy);
            letter-spacing: 0.5px;
        }
        
        .trip-description {
            font-size: 0.875rem;
            color: var(--charcoal);
            margin-top: 8px;
            opacity: 0.8;
        }
        
        /* Form Inputs */
        .form-group {
            margin-bottom: 24px;
        }
        
        .form-label {
            display: block;
            font-weight: 500;
            color: var(--deep-navy);
            margin-bottom: 8px;
            letter-spacing: 0.5px;
        }
        
        .form-input {
            width: 100%;
            padding: 16px;
            border: 2px solid var(--silver-gray);
            border-radius: 12px;
            font-size: 1rem;
            transition: var(--transition);
            background: var(--pearl-white);
        }
        
        .form-input:focus {
            outline: none;
            border-color: var(--luxury-gold);
            box-shadow: 0 0 0 3px rgba(212, 175, 55, 0.1);
        }
        
        select.form-input {
            cursor: pointer;
        }
        
        /* Date Inputs */
        .date-group {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        /* Climate Options */
        .climate-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 16px;
        }
        
        .climate-option {
            padding: 20px;
            background: var(--pearl-white);
            border: 2px solid transparent;
            border-radius: 12px;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .climate-option:hover {
            border-color: var(--silver-gray);
        }
        
        .climate-option.selected {
            border-color: var(--soft-mint);
            background: linear-gradient(135deg, rgba(78, 205, 196, 0.1) 0%, var(--pearl-white) 100%);
        }
        
        .climate-icon {
            font-size: 2rem;
            margin-bottom: 8px;
        }
        
        /* Activities */
        .activities-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
            gap: 12px;
        }
        
        .activity-chip {
            padding: 12px 20px;
            background: var(--pearl-white);
            border: 2px solid var(--silver-gray);
            border-radius: 25px;
            cursor: pointer;
            transition: var(--transition);
            text-align: center;
            font-size: 0.9rem;
        }
        
        .activity-chip:hover {
            border-color: var(--charcoal);
        }
        
        .activity-chip.selected {
            background: var(--deep-navy);
            color: white;
            border-color: var(--deep-navy);
        }
        
        /* Buttons */
        .button-group {
            display: flex;
            justify-content: space-between;
            margin-top: 40px;
            gap: 20px;
        }
        
        .btn {
            padding: 16px 40px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 500;
            letter-spacing: 1px;
            cursor: pointer;
            transition: var(--transition);
            text-transform: uppercase;
        }
        
        .btn-secondary {
            background: white;
            color: var(--deep-navy);
            border: 2px solid var(--silver-gray);
        }
        
        .btn-secondary:hover {
            border-color: var(--deep-navy);
            box-shadow: var(--shadow-medium);
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--luxury-gold) 0%, #C19B37 100%);
            color: white;
            box-shadow: var(--shadow-medium);
            flex: 1;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-hover);
        }
        
        .btn-primary:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        /* Results Section */
        .results-section {
            background: white;
            border-radius: 20px;
            padding: 48px;
            box-shadow: var(--shadow-luxury);
            display: none;
        }
        
        .results-header {
            text-align: center;
            margin-bottom: 48px;
            position: relative;
        }
        
        .results-title {
            font-size: 2.5rem;
            font-weight: 300;
            color: var(--deep-navy);
            margin-bottom: 16px;
            letter-spacing: 1px;
        }
        
        .results-subtitle {
            color: var(--charcoal);
            font-size: 1.125rem;
        }
        
        /* Action Buttons in Results */
        .results-actions {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-top: 40px;
        }
        
        .action-btn {
            background: var(--deep-navy);
            color: white;
            padding: 16px 40px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 500;
            letter-spacing: 1px;
            cursor: pointer;
            transition: var(--transition);
            text-transform: uppercase;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .action-btn:hover {
            background: var(--midnight-blue);
            transform: translateY(-2px);
            box-shadow: var(--shadow-hover);
        }
        
        .action-btn.secondary {
            background: white;
            color: var(--deep-navy);
            border: 2px solid var(--deep-navy);
        }
        
        .action-btn.secondary:hover {
            background: var(--deep-navy);
            color: white;
        }
        
        /* Packing Categories */
        .packing-category {
            margin-bottom: 40px;
            border-bottom: 1px solid var(--silver-gray);
            padding-bottom: 32px;
        }
        
        .packing-category:last-child {
            border-bottom: none;
        }
        
        .category-header {
            display: flex;
            align-items: center;
            margin-bottom: 24px;
        }
        
        .category-icon {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, var(--luxury-gold) 0%, var(--soft-mint) 100%);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            margin-right: 16px;
        }
        
        .category-title {
            font-size: 1.5rem;
            font-weight: 400;
            color: var(--deep-navy);
            letter-spacing: 0.5px;
        }
        
        .packing-items {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 12px;
        }
        
        .packing-item {
            display: flex;
            align-items: center;
            padding: 16px;
            background: var(--pearl-white);
            border-radius: 12px;
            transition: var(--transition);
        }
        
        .packing-item:hover {
            background: var(--warm-beige);
            transform: translateX(4px);
        }
        
        .item-checkbox {
            width: 24px;
            height: 24px;
            border: 2px solid var(--silver-gray);
            border-radius: 6px;
            margin-right: 16px;
            cursor: pointer;
            transition: var(--transition);
            position: relative;
        }
        
        .item-checkbox.checked {
            background: var(--soft-mint);
            border-color: var(--soft-mint);
        }
        
        .item-checkbox.checked::after {
            content: '‚úì';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-weight: bold;
        }
        
        .item-details {
            flex: 1;
        }
        
        .item-name {
            font-weight: 500;
            color: var(--charcoal);
        }
        
        .item-quantity {
            font-size: 0.875rem;
            color: var(--luxury-gold);
            font-weight: 600;
        }
        
        /* Travel Tips */
        .travel-tips {
            background: linear-gradient(135deg, var(--champagne) 0%, var(--pearl-white) 100%);
            border-radius: 16px;
            padding: 32px;
            margin-top: 40px;
        }
        
        .tips-title {
            font-size: 1.5rem;
            font-weight: 400;
            color: var(--deep-navy);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .tips-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }
        
        .tip-card {
            background: white;
            padding: 24px;
            border-radius: 12px;
            box-shadow: var(--shadow-light);
        }
        
        .tip-header {
            font-weight: 600;
            color: var(--deep-navy);
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .tip-content {
            color: var(--charcoal);
            font-size: 0.875rem;
            line-height: 1.6;
        }
        
        /* Print Styles */
        @media print {
            body {
                background: white;
                font-family: Arial, sans-serif;
            }
            
            .header, 
            .progress-container, 
            .form-section, 
            .button-group, 
            .results-actions,
            .start-over-btn {
                display: none !important;
            }
            
            .results-section {
                display: block !important;
                box-shadow: none;
                padding: 20px;
                border-radius: 0;
            }
            
            .results-header {
                margin-bottom: 30px;
            }
            
            .results-title {
                font-size: 24pt;
                color: black;
            }
            
            .packing-category {
                page-break-inside: avoid;
                margin-bottom: 20px;
                padding-bottom: 20px;
            }
            
            .category-icon {
                width: 40px;
                height: 40px;
                background: #f0f0f0 !important;
                print-color-adjust: exact;
                -webkit-print-color-adjust: exact;
            }
            
            .packing-item {
                break-inside: avoid;
                background: #f9f9f9 !important;
                print-color-adjust: exact;
                -webkit-print-color-adjust: exact;
            }
            
            .travel-tips {
                page-break-inside: avoid;
                background: #f5f5f5 !important;
                print-color-adjust: exact;
                -webkit-print-color-adjust: exact;
            }
            
            .tip-card {
                break-inside: avoid;
            }
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            h1 {
                font-size: 2rem;
            }
            
            .form-section {
                padding: 32px 20px;
            }
            
            .trip-types {
                grid-template-columns: 1fr;
            }
            
            .date-group {
                grid-template-columns: 1fr;
            }
            
            .progress-steps {
                font-size: 0.75rem;
            }
            
            .step-circle {
                width: 40px;
                height: 40px;
                font-size: 1rem;
            }
            
            .travel-type-selector {
                flex-direction: column;
            }
            
            .traveler-inputs {
                grid-template-columns: 1fr;
            }
            
            .results-actions {
                flex-direction: column;
            }
            
            .action-btn {
                width: 100%;
                justify-content: center;
            }
        }
        
        /* Loading Animation */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(212, 175, 55, 0.3);
            border-radius: 50%;
            border-top-color: var(--luxury-gold);
            animation: spin 1s ease-in-out infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <button class="start-over-btn" onclick="startOver()" style="display: none;" id="startOverBtn">
            ‚Üª Start Over
        </button>
        <div class="header-content">
            <h1>Ultimate Travel Planner</h1>
            <p class="subtitle">Create your personalized packing list and travel essentials guide</p>
        </div>
    </header>

    <!-- Main Container -->
    <div class="container">
        <!-- Progress Bar -->
        <div class="progress-container">
            <div class="progress-steps">
                <div class="progress-line">
                    <div class="progress-line-fill" id="progressFill"></div>
                </div>
                <div class="step active" id="step1">
                    <div class="step-circle">1</div>
                    <div class="step-label">Travelers</div>
                </div>
                <div class="step" id="step2">
                    <div class="step-circle">2</div>
                    <div class="step-label">Trip Style</div>
                </div>
                <div class="step" id="step3">
                    <div class="step-circle">3</div>
                    <div class="step-label">Details</div>
                </div>
                <div class="step" id="step4">
                    <div class="step-circle">4</div>
                    <div class="step-label">Activities</div>
                </div>
                <div class="step" id="step5">
                    <div class="step-circle">‚úì</div>
                    <div class="step-label">Your List</div>
                </div>
            </div>
        </div>

        <!-- Step 1: Traveler Composition -->
        <div class="form-section active" id="section1">
            <h2 class="section-title">Who's traveling?</h2>
            <p style="text-align: center; color: var(--charcoal); margin-bottom: 32px;">Tell us about your travel party</p>
            
            <div class="traveler-inputs">
                <div class="traveler-group">
                    <label class="traveler-label">Adults</label>
                    <span class="traveler-sublabel">(18+ years)</span>
                    <div class="number-input-wrapper">
                        <button class="number-btn" onclick="updateTravelerCount('adults', -1)">‚àí</button>
                        <span class="number-display" id="adultsCount">1</span>
                        <button class="number-btn" onclick="updateTravelerCount('adults', 1)">+</button>
                    </div>
                </div>
                
                <div class="traveler-group">
                    <label class="traveler-label">Children</label>
                    <span class="traveler-sublabel">(2-17 years)</span>
                    <div class="number-input-wrapper">
                        <button class="number-btn" onclick="updateTravelerCount('children', -1)">‚àí</button>
                        <span class="number-display" id="childrenCount">0</span>
                        <button class="number-btn" onclick="updateTravelerCount('children', 1)">+</button>
                    </div>
                </div>
                
                <div class="traveler-group">
                    <label class="traveler-label">Infants</label>
                    <span class="traveler-sublabel">(Under 2 years)</span>
                    <div class="number-input-wrapper">
                        <button class="number-btn" onclick="updateTravelerCount('infants', -1)">‚àí</button>
                        <span class="number-display" id="infantsCount">0</span>
                        <button class="number-btn" onclick="updateTravelerCount('infants', 1)">+</button>
                    </div>
                </div>
            </div>
            
            <div class="button-group">
                <button class="btn btn-primary" onclick="nextStep()">Continue</button>
            </div>
        </div>

        <!-- Step 2: Trip Type -->
        <div class="form-section" id="section2">
            <h2 class="section-title">What type of trip are you planning?</h2>
            <div class="trip-types">
                <div class="trip-type-card" data-type="business" onclick="selectTripType('business')">
                    <div class="trip-icon">üíº</div>
                    <div class="trip-name">Business Travel</div>
                    <div class="trip-description">Professional attire & tech essentials</div>
                </div>
                <div class="trip-type-card" data-type="beach" onclick="selectTripType('beach')">
                    <div class="trip-icon">üèñÔ∏è</div>
                    <div class="trip-name">Beach Vacation</div>
                    <div class="trip-description">Sun, sand & relaxation</div>
                </div>
                <div class="trip-type-card" data-type="city" onclick="selectTripType('city')">
                    <div class="trip-icon">üèôÔ∏è</div>
                    <div class="trip-name">City Exploration</div>
                    <div class="trip-description">Urban adventures & culture</div>
                </div>
                <div class="trip-type-card" data-type="adventure" onclick="selectTripType('adventure')">
                    <div class="trip-icon">‚õ∞Ô∏è</div>
                    <div class="trip-name">Adventure Travel</div>
                    <div class="trip-description">Outdoor activities & exploration</div>
                </div>
                <div class="trip-type-card" data-type="luxury" onclick="selectTripType('luxury')">
                    <div class="trip-icon">ü•Ç</div>
                    <div class="trip-name">Luxury Getaway</div>
                    <div class="trip-description">Premium experiences & comfort</div>
                </div>
                <div class="trip-type-card" data-type="cruise" onclick="selectTripType('cruise')">
                    <div class="trip-icon">üö¢</div>
                    <div class="trip-name">Cruise</div>
                    <div class="trip-description">Sea voyage essentials</div>
                </div>
                <div class="trip-type-card" data-type="family" onclick="selectTripType('family')">
                    <div class="trip-icon">üë®‚Äçüë©‚Äçüëß‚Äçüë¶</div>
                    <div class="trip-name">Family Vacation</div>
                    <div class="trip-description">Fun for all ages</div>
                </div>
                <div class="trip-type-card" data-type="roadtrip" onclick="selectTripType('roadtrip')">
                    <div class="trip-icon">üöó</div>
                    <div class="trip-name">Road Trip</div>
                    <div class="trip-description">Highway adventures</div>
                </div>
            </div>
            <div class="button-group">
                <button class="btn btn-secondary" onclick="previousStep()">Back</button>
                <button class="btn btn-primary" onclick="nextStep()" disabled id="step2Next">Continue</button>
            </div>
        </div>

        <!-- Step 3: Trip Details -->
        <div class="form-section" id="section3">
            <h2 class="section-title">Tell us about your trip</h2>
            
            <div class="form-group">
                <label class="form-label">Destination</label>
                <input type="text" class="form-input" id="destination" placeholder="e.g., Paris, France">
            </div>
            
            <div class="date-group">
                <div class="form-group">
                    <label class="form-label">Departure Date</label>
                    <input type="date" class="form-input" id="departureDate">
                </div>
                <div class="form-group">
                    <label class="form-label">Return Date</label>
                    <input type="date" class="form-input" id="returnDate">
                </div>
            </div>
            
            <div class="form-group">
                <label class="form-label">Expected Climate</label>
                <div class="climate-options">
                    <div class="climate-option" data-climate="tropical" onclick="selectClimate('tropical')">
                        <div class="climate-icon">üå¥</div>
                        <div>Tropical</div>
                    </div>
                    <div class="climate-option" data-climate="cold" onclick="selectClimate('cold')">
                        <div class="climate-icon">‚ùÑÔ∏è</div>
                        <div>Cold</div>
                    </div>
                    <div class="climate-option" data-climate="temperate" onclick="selectClimate('temperate')">
                        <div class="climate-icon">üå§Ô∏è</div>
                        <div>Temperate</div>
                    </div>
                    <div class="climate-option" data-climate="desert" onclick="selectClimate('desert')">
                        <div class="climate-icon">üèúÔ∏è</div>
                        <div>Desert/Dry</div>
                    </div>
                    <div class="climate-option" data-climate="rainy" onclick="selectClimate('rainy')">
                        <div class="climate-icon">üåßÔ∏è</div>
                        <div>Rainy</div>
                    </div>
                    <div class="climate-option" data-climate="variable" onclick="selectClimate('variable')">
                        <div class="climate-icon">üå¶Ô∏è</div>
                        <div>Variable</div>
                    </div>
                </div>
            </div>
            
            <div class="form-group">
                <label class="form-label">Accommodation Type</label>
                <select class="form-input" id="accommodation">
                    <option value="">Select accommodation</option>
                    <option value="hotel">Hotel/Resort</option>
                    <option value="airbnb">Vacation Rental</option>
                    <option value="hostel">Hostel</option>
                    <option value="camping">Camping</option>
                    <option value="friends">Friends/Family</option>
                    <option value="cruise">Cruise Ship</option>
                </select>
            </div>
            
            <div class="button-group">
                <button class="btn btn-secondary" onclick="previousStep()">Back</button>
                <button class="btn btn-primary" onclick="nextStep()" disabled id="step3Next">Continue</button>
            </div>
        </div>

        <!-- Step 4: Activities -->
        <div class="form-section" id="section4">
            <h2 class="section-title">What activities are you planning?</h2>
            <p style="text-align: center; color: var(--charcoal); margin-bottom: 32px;">Select all that apply</p>
            
            <div class="activities-grid">
                <div class="activity-chip" data-activity="swimming" onclick="toggleActivity('swimming')">üèä Swimming</div>
                <div class="activity-chip" data-activity="hiking" onclick="toggleActivity('hiking')">ü•æ Hiking</div>
                <div class="activity-chip" data-activity="dining" onclick="toggleActivity('dining')">üçΩÔ∏è Fine Dining</div>
                <div class="activity-chip" data-activity="nightlife" onclick="toggleActivity('nightlife')">üç∏ Nightlife</div>
                <div class="activity-chip" data-activity="shopping" onclick="toggleActivity('shopping')">üõçÔ∏è Shopping</div>
                <div class="activity-chip" data-activity="photography" onclick="toggleActivity('photography')">üì∏ Photography</div>
                <div class="activity-chip" data-activity="business" onclick="toggleActivity('business')">üíº Business Meetings</div>
                <div class="activity-chip" data-activity="fitness" onclick="toggleActivity('fitness')">üí™ Fitness/Gym</div>
                <div class="activity-chip" data-activity="spa" onclick="toggleActivity('spa')">üßñ Spa/Wellness</div>
                <div class="activity-chip" data-activity="golf" onclick="toggleActivity('golf')">‚õ≥ Golf</div>
                <div class="activity-chip" data-activity="skiing" onclick="toggleActivity('skiing')">‚õ∑Ô∏è Skiing</div>
                <div class="activity-chip" data-activity="sailing" onclick="toggleActivity('sailing')">‚õµ Sailing</div>
                <div class="activity-chip" data-activity="cultural" onclick="toggleActivity('cultural')">üèõÔ∏è Museums/Culture</div>
                <div class="activity-chip" data-activity="wildlife" onclick="toggleActivity('wildlife')">ü¶Å Wildlife Viewing</div>
                <div class="activity-chip" data-activity="cycling" onclick="toggleActivity('cycling')">üö¥ Cycling</div>
                <div class="activity-chip" data-activity="watersports" onclick="toggleActivity('watersports')">üèÑ Water Sports</div>
                <div class="activity-chip" data-activity="theme-parks" onclick="toggleActivity('theme-parks')">üé¢ Theme Parks</div>
                <div class="activity-chip" data-activity="kids-activities" onclick="toggleActivity('kids-activities')">üéà Kids Activities</div>
            </div>
            
            <div class="button-group">
                <button class="btn btn-secondary" onclick="previousStep()">Back</button>
                <button class="btn btn-primary" onclick="generatePackingList()">Generate My Packing List</button>
            </div>
        </div>

        <!-- Results Section -->
        <div class="results-section" id="resultsSection">
            <div class="results-header">
                <h2 class="results-title">Your Personalized Packing List</h2>
                <p class="results-subtitle">Check off items as you pack</p>
            </div>
            
            <div id="packingListContent">
                <!-- Packing list will be generated here -->
            </div>
            
            <div class="results-actions">
                <button class="action-btn" onclick="printPackingList()">
                    <span>üñ®Ô∏è</span>
                    <span>Print List</span>
                </button>
                <button class="action-btn secondary" onclick="startOver()">
                    <span>‚Üª</span>
                    <span>Start New List</span>
                </button>
            </div>
        </div>
    </div>

    <script>
        // State management
        var currentStep = 1;
        var totalSteps = 4;
        var tripData = {
            travelers: {
                adults: 1,
                children: 0,
                infants: 0
            },
            type: null,
            destination: '',
            departureDate: '',
            returnDate: '',
            climate: null,
            accommodation: '',
            activities: []
        };

        // Define ALL functions globally first
        
        function selectTripType(type) {
            console.log('Selecting trip type:', type);
            document.querySelectorAll('.trip-type-card').forEach(function(card) {
                card.classList.remove('selected');
            });
            
            var selectedCard = document.querySelector('.trip-type-card[data-type="' + type + '"]');
            if (selectedCard) {
                selectedCard.classList.add('selected');
            }
            
            tripData.type = type;
            document.getElementById('step2Next').disabled = false;
        }

        function selectClimate(climate) {
            document.querySelectorAll('.climate-option').forEach(function(option) {
                option.classList.remove('selected');
            });
            
            var selectedOption = document.querySelector('.climate-option[data-climate="' + climate + '"]');
            if (selectedOption) {
                selectedOption.classList.add('selected');
            }
            
            tripData.climate = climate;
            checkStep3Completion();
        }

        function toggleActivity(activity) {
            var chip = document.querySelector('.activity-chip[data-activity="' + activity + '"]');
            if (chip) {
                chip.classList.toggle('selected');
                if (chip.classList.contains('selected')) {
                    if (tripData.activities.indexOf(activity) === -1) {
                        tripData.activities.push(activity);
                    }
                } else {
                    tripData.activities = tripData.activities.filter(function(a) {
                        return a !== activity;
                    });
                }
            }
        }

        function updateTravelerCount(type, change) {
            var currentCount = tripData.travelers[type];
            var newCount = Math.max(type === 'adults' ? 1 : 0, currentCount + change);
            tripData.travelers[type] = newCount;
            document.getElementById(type + 'Count').textContent = newCount;
        }

        function showSection(num) {
            document.querySelectorAll('.form-section').forEach(function(section) {
                section.classList.remove('active');
            });
            if (num <= totalSteps) {
                var section = document.getElementById('section' + num);
                if (section) {
                    section.classList.add('active');
                }
            }
        }

        function updateProgress() {
            var progress = ((currentStep - 1) / totalSteps) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
            
            for (var i = 1; i <= totalSteps + 1; i++) {
                var step = document.getElementById('step' + i);
                if (step) {
                    if (i < currentStep) {
                        step.classList.add('completed');
                        step.classList.remove('active');
                    } else if (i === currentStep) {
                        step.classList.add('active');
                        step.classList.remove('completed');
                    } else {
                        step.classList.remove('active', 'completed');
                    }
                }
            }
        }

        function nextStep() {
            if (currentStep < totalSteps) {
                currentStep++;
                updateProgress();
                showSection(currentStep);
                
                if (currentStep > 1) {
                    var startOverBtn = document.getElementById('startOverBtn');
                    if (startOverBtn) {
                        startOverBtn.style.display = 'block';
                    }
                }
            }
        }

        function previousStep() {
            if (currentStep > 1) {
                currentStep--;
                updateProgress();
                showSection(currentStep);
            }
        }

        function checkStep3Completion() {
            tripData.destination = document.getElementById('destination').value;
            tripData.departureDate = document.getElementById('departureDate').value;
            tripData.returnDate = document.getElementById('returnDate').value;
            tripData.accommodation = document.getElementById('accommodation').value;
            
            var isComplete = tripData.destination && tripData.departureDate && 
                           tripData.returnDate && tripData.climate && tripData.accommodation;
            
            document.getElementById('step3Next').disabled = !isComplete;
        }

        function startOver() {
            currentStep = 1;
            tripData = {
                travelers: {
                    adults: 1,
                    children: 0,
                    infants: 0
                },
                type: null,
                destination: '',
                departureDate: '',
                returnDate: '',
                climate: null,
                accommodation: '',
                activities: []
            };
            
            document.querySelectorAll('.selected').forEach(function(el) {
                el.classList.remove('selected');
            });
            document.querySelectorAll('.checked').forEach(function(el) {
                el.classList.remove('checked');
            });
            
            document.getElementById('adultsCount').textContent = '1';
            document.getElementById('childrenCount').textContent = '0';
            document.getElementById('infantsCount').textContent = '0';
            document.getElementById('destination').value = '';
            document.getElementById('departureDate').value = '';
            document.getElementById('returnDate').value = '';
            document.getElementById('accommodation').value = '';
            
            document.getElementById('step2Next').disabled = true;
            document.getElementById('step3Next').disabled = true;
            
            document.getElementById('resultsSection').style.display = 'none';
            document.getElementById('startOverBtn').style.display = 'none';
            showSection(1);
            updateProgress();
            
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function getTripDuration() {
            var start = new Date(tripData.departureDate);
            var end = new Date(tripData.returnDate);
            var duration = Math.ceil((end - start) / (1000 * 60 * 60 * 24)) + 1;
            return duration;
        }

        function generatePackingList() {
            currentStep = totalSteps + 1;
            updateProgress();
            
            document.querySelectorAll('.form-section').forEach(function(section) {
                section.style.display = 'none';
            });
            document.getElementById('resultsSection').style.display = 'block';
            
            var duration = getTripDuration();
            var packingList = compilePackingList(duration);
            
            renderPackingList(packingList, duration);
        }

        function toggleCheck(itemId) {
            var checkbox = document.getElementById(itemId);
            if (checkbox) {
                checkbox.classList.toggle('checked');
            }
        }

        function printPackingList() {
            window.print();
        }

        // Enhanced packing database with family items
        const packingDatabase = {
            base: {
                documents: {
                    international: ['Passport', 'Visa (if required)', 'Travel insurance', 'Boarding passes', 'Hotel confirmations', 'Emergency contacts', 'Copies of important documents', 'Vaccination records'],
                    domestic: ['Driver\'s license or ID', 'Travel insurance', 'Boarding passes', 'Hotel confirmations', 'Emergency contacts', 'Health insurance cards']
                },
                money: ['Credit cards', 'Cash', 'Debit card', 'Travel wallet'],
                electronics: ['Phone charger', 'Portable battery', 'Headphones', 'Charging cables'],
                toiletries: ['Toothbrush & toothpaste', 'Shampoo & conditioner', 'Body wash', 'Deodorant', 'Razor', 'Medications', 'Sunscreen', 'Hand sanitizer'],
                clothing: ['Underwear', 'Socks', 'Sleepwear', 'Comfortable shoes'],
                accessories: ['Sunglasses', 'Watch', 'Day bag/backpack'],
                health: ['First aid kit', 'Prescription medications', 'Vitamins', 'Face masks', 'Hand wipes']
            },
            
            infantItems: {
                essentials: ['Diapers', 'Baby wipes', 'Diaper rash cream', 'Changing pad', 'Plastic bags for dirty diapers'],
                feeding: ['Formula/breast milk storage', 'Bottles', 'Bottle cleaning supplies', 'Bibs', 'Burp cloths', 'Baby food/snacks', 'Sippy cups'],
                clothing: ['Baby clothes', 'Extra outfits', 'Baby pajamas', 'Baby jacket/sweater'],
                comfort: ['Pacifiers', 'Favorite toys', 'Baby blanket', 'White noise machine', 'Baby monitor'],
                health: ['Baby thermometer', 'Baby medications', 'Nasal aspirator', 'Baby sunscreen', 'Teething gel/toys'],
                travel: ['Stroller', 'Baby carrier', 'Car seat (if driving)', 'Portable crib/travel bassinet']
            },
            
            childItems: {
                entertainment: ['Tablets/devices', 'Headphones for kids', 'Coloring books & crayons', 'Travel games', 'Books', 'Small toys'],
                clothing: ['Kids clothing', 'Extra outfits', 'Kids pajamas', 'Kids shoes', 'Kids jackets'],
                health: ['Kids medications', 'Kids vitamins', 'Band-aids with fun designs'],
                comfort: ['Favorite stuffed animal', 'Special blanket', 'Night light'],
                snacks: ['Kids snacks', 'Juice boxes', 'Reusable water bottles', 'Lunchbox']
            },
            
            familyItems: {
                beach: ['Kids sunscreen SPF 50+', 'Swim diapers', 'Kids floaties/life vests', 'Beach toys', 'Kids swimsuits', 'Kids sun hats'],
                general: ['Wet wipes', 'Hand sanitizer', 'Snack bags', 'Entertainment items', 'First aid supplies', 'Plastic bags'],
                car: ['Car games', 'Travel pillows', 'Car sick bags', 'Window shades', 'Snack organizer']
            },
            
            tripTypes: {
                business: {
                    clothing: ['Business suits', 'Dress shirts', 'Professional shoes', 'Ties/accessories', 'Business casual outfits'],
                    electronics: ['Laptop & charger', 'Tablet', 'Portable mouse', 'USB drive', 'Business cards holder', 'Universal adapter'],
                    accessories: ['Professional bag/briefcase', 'Portfolio', 'Nice watch', 'Cufflinks'],
                    documents: ['Business cards', 'Meeting materials', 'Company ID']
                },
                beach: {
                    clothing: ['Swimsuits', 'Beach cover-ups', 'Flip flops', 'Sun hat', 'Light clothing', 'Beach towel'],
                    accessories: ['Beach bag', 'Waterproof phone case', 'Snorkeling gear', 'Beach umbrella'],
                    health: ['Aloe vera', 'Extra sunscreen', 'Insect repellent', 'After-sun lotion']
                },
                city: {
                    clothing: ['Comfortable walking shoes', 'Casual outfits', 'Light jacket', 'Scarf'],
                    electronics: ['Camera', 'City map app', 'Portable WiFi'],
                    accessories: ['Crossbody bag', 'Guidebook', 'Reusable water bottle']
                },
                adventure: {
                    clothing: ['Hiking boots', 'Quick-dry clothing', 'Rain jacket', 'Thermal layers', 'Hat & gloves'],
                    gear: ['Backpack', 'Water bottles', 'Compass', 'Flashlight', 'Multi-tool', 'First aid kit'],
                    accessories: ['Sunglasses', 'Bandana', 'Carabiners']
                },
                luxury: {
                    clothing: ['Evening wear', 'Designer outfits', 'Dress shoes', 'Jewelry', 'Formal accessories'],
                    accessories: ['Clutch/evening bag', 'Nice luggage', 'Shoe bags', 'Garment bags'],
                    extras: ['Perfume/cologne', 'Hair styling tools', 'Makeup kit']
                },
                cruise: {
                    clothing: ['Formal dinner attire', 'Casual day wear', 'Pool attire', 'Themed outfit'],
                    accessories: ['Lanyard for key card', 'Highlighter for daily program', 'Magnetic hooks'],
                    health: ['Motion sickness remedies', 'Hand sanitizer', 'Vitamins']
                },
                family: {
                    entertainment: ['Board games', 'Card games', 'Movies/shows downloaded', 'Books for all ages'],
                    snacks: ['Family snacks', 'Reusable water bottles for everyone', 'Cooler bag'],
                    health: ['Family first aid kit', 'Everyone\'s medications', 'Thermometer', 'Pain relievers for adults and kids']
                },
                roadtrip: {
                    car: ['Car chargers', 'GPS/navigation', 'Emergency kit', 'Spare tire tools', 'Jumper cables'],
                    comfort: ['Pillows', 'Blankets', 'Cooler', 'Paper towels', 'Trash bags'],
                    entertainment: ['Road trip playlist', 'Audiobooks', 'Car games', 'Snacks & drinks']
                }
            },
            
            climate: {
                tropical: {
                    clothing: ['Lightweight fabrics', 'Shorts', 'Tank tops', 'Sandals', 'Rain poncho'],
                    accessories: ['Mosquito repellent', 'Humidity-resistant items']
                },
                cold: {
                    clothing: ['Winter coat', 'Thermal underwear', 'Wool socks', 'Boots', 'Scarf & gloves', 'Warm hat'],
                    extras: ['Lip balm', 'Moisturizer', 'Hand warmers']
                },
                temperate: {
                    clothing: ['Layering pieces', 'Light jacket', 'Mix of short and long sleeves'],
                    accessories: ['Light scarf', 'Versatile shoes']
                },
                desert: {
                    clothing: ['Breathable fabrics', 'Long sleeves for sun protection', 'Wide-brim hat'],
                    health: ['Lip balm with SPF', 'Eye drops', 'Extra water bottles']
                },
                rainy: {
                    clothing: ['Rain jacket', 'Waterproof shoes', 'Quick-dry clothes', 'Umbrella'],
                    accessories: ['Waterproof bags', 'Plastic bags for electronics']
                },
                variable: {
                    clothing: ['Layers', 'Convertible clothing', 'All-weather jacket'],
                    accessories: ['Packable items', 'Versatile accessories']
                }
            },
            
            activities: {
                swimming: ['Extra swimsuits', 'Goggles', 'Pool shoes', 'Waterproof bag', 'Swim cap'],
                hiking: ['Hiking boots', 'Trekking poles', 'Trail snacks', 'Hydration pack', 'Trail map'],
                dining: ['Dress code appropriate attire', 'Nice shoes', 'Reservation confirmations'],
                nightlife: ['Going out clothes', 'Comfortable dancing shoes', 'Small clutch/wallet'],
                shopping: ['Foldable shopping bag', 'Comfortable shoes', 'Credit cards with no foreign fees'],
                photography: ['Camera equipment', 'Extra memory cards', 'Lens cleaning kit', 'Tripod'],
                business: ['Business attire', 'Laptop', 'Business cards', 'Portfolio'],
                fitness: ['Workout clothes', 'Athletic shoes', 'Resistance bands', 'Yoga mat'],
                spa: ['Robe', 'Flip flops', 'Swimsuit', 'Hair tie'],
                golf: ['Golf attire', 'Golf shoes', 'Gloves', 'Balls & tees'],
                skiing: ['Ski wear', 'Goggles', 'Thermal layers', 'Ski socks', 'Hand warmers'],
                sailing: ['Deck shoes', 'Windbreaker', 'Hat with strap', 'Sailing gloves'],
                cultural: ['Modest clothing', 'Comfortable walking shoes', 'Guidebook', 'Notebook'],
                wildlife: ['Binoculars', 'Neutral colored clothing', 'Camera with zoom', 'Field guide'],
                cycling: ['Cycling shorts', 'Helmet', 'Gloves', 'Water bottles'],
                watersports: ['Rash guard', 'Water shoes', 'Dry bag', 'Towel clips'],
                'theme-parks': ['Comfortable shoes', 'Poncho', 'Small backpack', 'Portable phone charger', 'Sunscreen'],
                'kids-activities': ['Kids entertainment', 'Snacks', 'Wet wipes', 'Change of clothes', 'Small first aid kit']
            }
        };

        // Function to select trip type
        function selectTripType(type) {
            document.querySelectorAll('.trip-type-card').forEach(card => {
                card.classList.remove('selected');
            });
            
            const selectedCard = document.querySelector(`.trip-type-card[data-type="${type}"]`);
            if (selectedCard) {
                selectedCard.classList.add('selected');
            }
            
            tripData.type = type;
            document.getElementById('step3Next').disabled = false;
        }
        window.selectTripType = selectTripType;
        
        // Function to select climate
        function selectClimate(climate) {
            document.querySelectorAll('.climate-option').forEach(option => {
                option.classList.remove('selected');
            });
            
            const selectedOption = document.querySelector(`.climate-option[data-climate="${climate}"]`);
            if (selectedOption) {
                selectedOption.classList.add('selected');
            }
            
            tripData.climate = climate;
            checkStep4Completion();
        }
        window.selectClimate = selectClimate;
        
        // Function to toggle activity
        function toggleActivity(activity) {
            const chip = document.querySelector(`.activity-chip[data-activity="${activity}"]`);
            if (chip) {
                chip.classList.toggle('selected');
                if (chip.classList.contains('selected')) {
                    if (!tripData.activities.includes(activity)) {
                        tripData.activities.push(activity);
                    }
                } else {
                    tripData.activities = tripData.activities.filter(a => a !== activity);
                }
            }
        }
        window.toggleActivity = toggleActivity;
        function initializeEventListeners() {
            // Travel type selection (domestic/international)
            document.querySelectorAll('.travel-type-option').forEach(option => {
                option.addEventListener('click', function() {
                    document.querySelectorAll('.travel-type-option').forEach(o => o.classList.remove('selected'));
                    this.classList.add('selected');
                    tripData.travelType = this.dataset.travel;
                    document.getElementById('step1Next').disabled = false;
                });
            });

            // Trip type selection
            document.querySelectorAll('.trip-type-card').forEach(card => {
                card.addEventListener('click', function() {
                    document.querySelectorAll('.trip-type-card').forEach(c => c.classList.remove('selected'));
                    this.classList.add('selected');
                    tripData.type = this.dataset.type;
                    document.getElementById('step3Next').disabled = false;
                });
            });

            // Climate selection
            document.querySelectorAll('.climate-option').forEach(option => {
                option.addEventListener('click', function() {
                    document.querySelectorAll('.climate-option').forEach(o => o.classList.remove('selected'));
                    this.classList.add('selected');
                    tripData.climate = this.dataset.climate;
                    checkStep4Completion();
                });
            });

            // Activity selection
            document.querySelectorAll('.activity-chip').forEach(chip => {
                chip.addEventListener('click', function() {
                    this.classList.toggle('selected');
                    const activity = this.dataset.activity;
                    if (this.classList.contains('selected')) {
                        if (!tripData.activities.includes(activity)) {
                            tripData.activities.push(activity);
                        }
                    } else {
                        tripData.activities = tripData.activities.filter(a => a !== activity);
                    }
                });
            });

            // Form inputs
            const destination = document.getElementById('destination');
            const departureDate = document.getElementById('departureDate');
            const returnDate = document.getElementById('returnDate');
            const accommodation = document.getElementById('accommodation');
            
            if (destination) destination.addEventListener('input', checkStep4Completion);
            if (departureDate) departureDate.addEventListener('change', checkStep4Completion);
            if (returnDate) returnDate.addEventListener('change', checkStep4Completion);
            if (accommodation) accommodation.addEventListener('change', checkStep4Completion);

            // Set minimum date to today
            const today = new Date().toISOString().split('T')[0];
            if (departureDate) departureDate.min = today;
            if (returnDate) returnDate.min = today;
        }

        // Initialize on DOM load
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initializeEventListeners);
        } else {
            // DOM already loaded
            initializeEventListeners();
        }

        // Update traveler count
        function updateTravelerCount(type, change) {
            const currentCount = tripData.travelers[type];
            const newCount = Math.max(type === 'adults' ? 1 : 0, currentCount + change);
            tripData.travelers[type] = newCount;
            document.getElementById(`${type}Count`).textContent = newCount;
        }

        // Check if step 4 is complete
        function checkStep4Completion() {
            tripData.destination = document.getElementById('destination').value;
            tripData.departureDate = document.getElementById('departureDate').value;
            tripData.returnDate = document.getElementById('returnDate').value;
            tripData.accommodation = document.getElementById('accommodation').value;
            
            const isComplete = tripData.destination && tripData.departureDate && 
                             tripData.returnDate && tripData.climate && tripData.accommodation;
            
            document.getElementById('step4Next').disabled = !isComplete;
        }

        // Update progress bar
        function updateProgress() {
            const progress = ((currentStep - 1) / totalSteps) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
            
            // Update step indicators
            for (let i = 1; i <= totalSteps + 1; i++) {
                const step = document.getElementById(`step${i}`);
                if (step) {
                    if (i < currentStep) {
                        step.classList.add('completed');
                        step.classList.remove('active');
                    } else if (i === currentStep) {
                        step.classList.add('active');
                        step.classList.remove('completed');
                    } else {
                        step.classList.remove('active', 'completed');
                    }
                }
            }
        }

        // Navigation functions
        function showSection(num) {
            document.querySelectorAll('.form-section').forEach(section => {
                section.classList.remove('active');
            });
            if (num <= totalSteps) {
                const section = document.getElementById(`section${num}`);
                if (section) {
                    section.classList.add('active');
                }
            }
        }

        function nextStep() {
            if (currentStep < totalSteps) {
                currentStep++;
                updateProgress();
                showSection(currentStep);
                
                // Show start over button after first step
                if (currentStep > 1) {
                    const startOverBtn = document.getElementById('startOverBtn');
                    if (startOverBtn) {
                        startOverBtn.style.display = 'block';
                    }
                }
            }
        }

        function previousStep() {
            if (currentStep > 1) {
                currentStep--;
                updateProgress();
                showSection(currentStep);
            }
        }

        // Start over function
        function startOver() {
            // Reset all data
            currentStep = 1;
            tripData = {
                travelType: null,
                travelers: {
                    adults: 1,
                    children: 0,
                    infants: 0
                },
                type: null,
                destination: '',
                departureDate: '',
                returnDate: '',
                climate: null,
                accommodation: '',
                activities: []
            };
            
            // Reset UI
            document.querySelectorAll('.selected').forEach(el => el.classList.remove('selected'));
            document.querySelectorAll('.checked').forEach(el => el.classList.remove('checked'));
            document.getElementById('adultsCount').textContent = '1';
            document.getElementById('childrenCount').textContent = '0';
            document.getElementById('infantsCount').textContent = '0';
            document.getElementById('destination').value = '';
            document.getElementById('departureDate').value = '';
            document.getElementById('returnDate').value = '';
            document.getElementById('accommodation').value = '';
            
            // Reset buttons
            document.getElementById('step1Next').disabled = true;
            document.getElementById('step3Next').disabled = true;
            document.getElementById('step4Next').disabled = true;
            
            // Hide results, show first section
            document.getElementById('resultsSection').style.display = 'none';
            document.getElementById('startOverBtn').style.display = 'none';
            showSection(1);
            updateProgress();
            
            // Scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Calculate trip duration
        function getTripDuration() {
            const start = new Date(tripData.departureDate);
            const end = new Date(tripData.returnDate);
            const duration = Math.ceil((end - start) / (1000 * 60 * 60 * 24)) + 1;
            return duration;
        }

        // Generate packing list
        function generatePackingList() {
            currentStep = totalSteps + 1;
            updateProgress();
            
            // Hide form sections and show results
            document.querySelectorAll('.form-section').forEach(section => {
                section.style.display = 'none';
            });
            document.getElementById('resultsSection').style.display = 'block';
            
            const duration = getTripDuration();
            const packingList = compilePackingList(duration);
            
            renderPackingList(packingList, duration);
        }

        // Compile packing list based on selections
        function compilePackingList(duration) {
            const list = {
                'Travel Documents': [],
                'Money & Cards': [],
                'Electronics': [],
                'Clothing': [],
                'Toiletries': [],
                'Accessories': [],
                'Health & Safety': [],
                'Special Gear': []
            };
            
            // Add infant-specific categories if needed
            if (tripData.travelers.infants > 0) {
                list['Baby Essentials'] = [];
                list['Baby Care'] = [];
            }
            
            // Add child-specific category if needed
            if (tripData.travelers.children > 0) {
                list['Kids Items'] = [];
            }
            
            // Add base documents (simplified - includes both domestic and international essentials)
            list['Travel Documents'] = ['Passport/ID', 'Travel insurance', 'Boarding passes', 'Hotel confirmations', 'Emergency contacts', 'Copies of important documents', 'Health insurance cards'];
            
            // Add base items
            list['Money & Cards'] = [...packingDatabase.base.money];
            list['Electronics'] = [...packingDatabase.base.electronics];
            list['Health & Safety'] = [...packingDatabase.base.health];
            list['Accessories'] = [...packingDatabase.base.accessories];
            
            // Calculate quantities based on travelers
            const totalTravelers = tripData.travelers.adults + tripData.travelers.children;
            const clothingDays = Math.min(duration, 7); // Pack for max 7 days, do laundry for longer trips
            
            // Add toiletries with quantities
            list['Toiletries'] = packingDatabase.base.toiletries.map(item => {
                if (item.includes('Toothbrush')) {
                    return `Toothbrushes & toothpaste (${totalTravelers} sets)`;
                }
                return item;
            });
            
            // Add base clothing with quantities for adults and children
            list['Clothing'] = [
                `Adult underwear (${(tripData.travelers.adults * (clothingDays + 2))} pairs)`,
                `Adult socks (${(tripData.travelers.adults * (clothingDays + 2))} pairs)`,
                `Adult sleepwear (${tripData.travelers.adults * 2} sets)`,
                'Comfortable walking shoes for adults'
            ];
            
            if (tripData.travelers.children > 0) {
                list['Clothing'].push(
                    `Kids underwear (${(tripData.travelers.children * (clothingDays + 2))} pairs)`,
                    `Kids socks (${(tripData.travelers.children * (clothingDays + 2))} pairs)`,
                    `Kids sleepwear (${tripData.travelers.children * 2} sets)`,
                    `Kids shoes (${tripData.travelers.children} pairs)`
                );
            }
            
            // Add infant items if traveling with babies
            if (tripData.travelers.infants > 0) {
                const infantDays = duration;
                list['Baby Essentials'] = [
                    `Diapers (${tripData.travelers.infants * infantDays * 8} total)`,
                    `Baby wipes (${Math.ceil(tripData.travelers.infants * infantDays / 2)} packs)`,
                    'Diaper rash cream',
                    `Changing pads (${tripData.travelers.infants} portable)`,
                    'Plastic bags for dirty diapers',
                    `Baby clothes (${tripData.travelers.infants * (infantDays + 3)} outfits)`,
                    `Baby pajamas (${tripData.travelers.infants * Math.ceil(infantDays / 2)} sets)`,
                    ...packingDatabase.infantItems.comfort
                ];
                
                list['Baby Care'] = [
                    ...packingDatabase.infantItems.feeding,
                    ...packingDatabase.infantItems.health,
                    ...packingDatabase.infantItems.travel
                ];
            }
            
            // Add child items if traveling with kids
            if (tripData.travelers.children > 0) {
                list['Kids Items'] = [
                    ...packingDatabase.childItems.entertainment,
                    ...packingDatabase.childItems.comfort,
                    ...packingDatabase.childItems.snacks,
                    ...packingDatabase.childItems.health
                ];
                
                // Add extra kids clothing
                list['Clothing'].push(
                    `Kids outfits (${tripData.travelers.children * (clothingDays + 2)} sets)`,
                    `Kids jackets (${tripData.travelers.children})`
                );
            }
            
            // Add trip type specific items
            if (packingDatabase.tripTypes[tripData.type]) {
                const typeItems = packingDatabase.tripTypes[tripData.type];
                Object.keys(typeItems).forEach(category => {
                    const targetCategory = getCategoryMapping(category);
                    list[targetCategory] = [...new Set([...list[targetCategory], ...typeItems[category]])];
                });
            }
            
            // Add family-specific items for certain trip types
            if ((tripData.travelers.children > 0 || tripData.travelers.infants > 0) && tripData.type === 'beach') {
                list['Kids Items'] = [...new Set([...list['Kids Items'] || [], ...packingDatabase.familyItems.beach])];
            }
            
            if (tripData.type === 'roadtrip' && (tripData.travelers.children > 0 || tripData.travelers.infants > 0)) {
                list['Special Gear'] = [...new Set([...list['Special Gear'], ...packingDatabase.familyItems.car])];
            }
            
            // Add climate specific items
            if (packingDatabase.climate[tripData.climate]) {
                const climateItems = packingDatabase.climate[tripData.climate];
                Object.keys(climateItems).forEach(category => {
                    const targetCategory = getCategoryMapping(category);
                    list[targetCategory] = [...new Set([...list[targetCategory], ...climateItems[category]])];
                });
            }
            
            // Add activity specific items
            tripData.activities.forEach(activity => {
                if (packingDatabase.activities[activity]) {
                    packingDatabase.activities[activity].forEach(item => {
                        const category = determineCategory(item);
                        if (!list[category].includes(item)) {
                            list[category].push(item);
                        }
                    });
                }
            });
            
            // Add international travel specific items
            if (tripData.travelType === 'international') {
                list['Electronics'].push('Universal power adapter', 'Voltage converter (if needed)');
                list['Money & Cards'].push('Foreign currency', 'Currency exchange info');
            }
            
            // Remove empty categories
            Object.keys(list).forEach(key => {
                if (list[key].length === 0) {
                    delete list[key];
                }
            });
            
            return list;
        }

        // Map subcategories to main categories
        function getCategoryMapping(category) {
            const mapping = {
                'clothing': 'Clothing',
                'electronics': 'Electronics',
                'accessories': 'Accessories',
                'documents': 'Travel Documents',
                'health': 'Health & Safety',
                'gear': 'Special Gear',
                'extras': 'Accessories'
            };
            return mapping[category] || 'Special Gear';
        }

        // Determine category for an item
        function determineCategory(item) {
            const itemLower = item.toLowerCase();
            if (itemLower.includes('wear') || itemLower.includes('shirt') || itemLower.includes('shoes') || 
                itemLower.includes('jacket') || itemLower.includes('clothes')) {
                return 'Clothing';
            } else if (itemLower.includes('camera') || itemLower.includes('charger') || 
                       itemLower.includes('laptop') || itemLower.includes('tablet')) {
                return 'Electronics';
            } else if (itemLower.includes('bag') || itemLower.includes('wallet') || 
                       itemLower.includes('watch')) {
                return 'Accessories';
            } else {
                return 'Special Gear';
            }
        }

        // Render packing list
        function renderPackingList(packingList, duration) {
            const content = document.getElementById('packingListContent');
            let html = '';
            
            // Add trip summary
            const travelersText = [];
            if (tripData.travelers.adults > 0) travelersText.push(`${tripData.travelers.adults} adult${tripData.travelers.adults > 1 ? 's' : ''}`);
            if (tripData.travelers.children > 0) travelersText.push(`${tripData.travelers.children} child${tripData.travelers.children > 1 ? 'ren' : ''}`);
            if (tripData.travelers.infants > 0) travelersText.push(`${tripData.travelers.infants} infant${tripData.travelers.infants > 1 ? 's' : ''}`);
            
            html += `
                <div class="travel-tips" style="margin-bottom: 40px;">
                    <div class="tips-title">
                        <span>‚úàÔ∏è</span>
                        <span>Trip Summary</span>
                    </div>
                    <div class="tips-grid">
                        <div class="tip-card">
                            <div class="tip-header">üìç Destination</div>
                            <div class="tip-content">${tripData.destination}</div>
                        </div>
                        <div class="tip-card">
                            <div class="tip-header">üìÖ Duration</div>
                            <div class="tip-content">${duration} days (${tripData.travelType})</div>
                        </div>
                        <div class="tip-card">
                            <div class="tip-header">üë• Travelers</div>
                            <div class="tip-content">${travelersText.join(', ')}</div>
                        </div>
                        <div class="tip-card">
                            <div class="tip-header">üå°Ô∏è Climate</div>
                            <div class="tip-content">${tripData.climate.charAt(0).toUpperCase() + tripData.climate.slice(1)}</div>
                        </div>
                    </div>
                </div>
            `;
            
            // Add packing categories
            const categoryIcons = {
                'Travel Documents': 'üìÑ',
                'Money & Cards': 'üí≥',
                'Electronics': 'üì±',
                'Clothing': 'üëî',
                'Toiletries': 'üß¥',
                'Accessories': 'üëú',
                'Health & Safety': 'üè•',
                'Special Gear': 'üéí',
                'Baby Essentials': 'üë∂',
                'Baby Care': 'üçº',
                'Kids Items': 'üß∏'
            };
            
            Object.keys(packingList).forEach(category => {
                html += `
                    <div class="packing-category">
                        <div class="category-header">
                            <div class="category-icon">${categoryIcons[category] || 'üì¶'}</div>
                            <h3 class="category-title">${category}</h3>
                        </div>
                        <div class="packing-items">
                `;
                
                packingList[category].forEach((item, index) => {
                    const itemId = `${category.replace(/\s/g, '')}-${index}`;
                    html += `
                        <div class="packing-item">
                            <div class="item-checkbox" id="${itemId}" onclick="toggleCheck('${itemId}')"></div>
                            <div class="item-details">
                                <div class="item-name">${item}</div>
                            </div>
                        </div>
                    `;
                });
                
                html += `
                        </div>
                    </div>
                `;
            });
            
            // Add travel tips
            html += generateTravelTips();
            
            content.innerHTML = html;
            
            // Scroll to results
            document.getElementById('resultsSection').scrollIntoView({ behavior: 'smooth' });
        }

        // Generate travel tips based on selections
        function generateTravelTips() {
            let tips = `
                <div class="travel-tips">
                    <div class="tips-title">
                        <span>üí°</span>
                        <span>Smart Travel Tips</span>
                    </div>
                    <div class="tips-grid">
            `;
            
            // Add tips based on travel type
            if (tripData.travelType === 'international') {
                tips += `
                    <div class="tip-card">
                        <div class="tip-header">üåç International Travel</div>
                        <div class="tip-content">Check passport expiration (must be valid 6+ months). Research visa requirements and get travel insurance.</div>
                    </div>
                `;
            }
            
            // Add tips for traveling with infants
            if (tripData.travelers.infants > 0) {
                tips += `
                    <div class="tip-card">
                        <div class="tip-header">üë∂ Flying with Babies</div>
                        <div class="tip-content">Pack extra diapers and formula in carry-on. Feed during takeoff/landing to help with ear pressure.</div>
                    </div>
                    <div class="tip-card">
                        <div class="tip-header">üçº Baby Essentials</div>
                        <div class="tip-content">Pack 50% more diapers than you think you'll need. Bring familiar items for comfort.</div>
                    </div>
                `;
            }
            
            // Add tips for traveling with children
            if (tripData.travelers.children > 0) {
                tips += `
                    <div class="tip-card">
                        <div class="tip-header">üéà Kids Travel</div>
                        <div class="tip-content">Pack surprise snacks and new small toys for the journey. Download movies/games before traveling.</div>
                    </div>
                `;
            }
            
            // Add tips based on trip type
            const tipsByType = {
                business: [
                    { icon: 'üëî', title: 'Professional Packing', content: 'Roll suits in dry cleaning bags to prevent wrinkles. Pack a portable steamer for touch-ups.' },
                    { icon: 'üíº', title: 'Tech Ready', content: 'Create a tech kit with all cables, adapters, and backup batteries in one pouch.' }
                ],
                beach: [
                    { icon: 'üèñÔ∏è', title: 'Beach Smart', content: 'Pack reef-safe sunscreen and bring a mesh bag for sandy items.' },
                    { icon: 'üåä', title: 'Water Safety', content: 'Keep electronics in waterproof pouches and bring zip-lock bags for wet clothes.' }
                ],
                adventure: [
                    { icon: 'ü•æ', title: 'Gear Check', content: 'Break in new hiking boots before the trip. Pack blister prevention supplies.' },
                    { icon: 'üéí', title: 'Layer Up', content: 'Use packing cubes to organize layers. Quick-dry fabrics save space and weight.' }
                ],
                luxury: [
                    { icon: '‚ú®', title: 'Protect Valuables', content: 'Use jewelry rolls and shoe bags. Take photos of valuable items for insurance.' },
                    { icon: 'ü•Ç', title: 'Dress Codes', content: 'Research venue dress codes in advance. Pack one versatile formal outfit.' }
                ],
                family: [
                    { icon: 'üë®‚Äçüë©‚Äçüëß‚Äçüë¶', title: 'Family Organization', content: 'Use different colored packing cubes for each family member. Pack a day bag with essentials.' },
                    { icon: 'üéØ', title: 'Entertainment Planning', content: 'Create activity bags for each day with snacks, games, and surprises.' }
                ],
                roadtrip: [
                    { icon: 'üöó', title: 'Car Organization', content: 'Use organizers for the backseat. Pack a cooler with snacks and drinks.' },
                    { icon: 'üõ£Ô∏è', title: 'Road Safety', content: 'Check tire pressure and fluids. Pack an emergency kit with jumper cables.' }
                ]
            };
            
            // Add climate tips
            const climateTips = {
                tropical: { icon: 'üå¥', title: 'Humidity Help', content: 'Pack moisture-wicking fabrics and use packing cubes with ventilation.' },
                cold: { icon: '‚ùÑÔ∏è', title: 'Warmth Strategy', content: 'Layer thin pieces rather than bulky items. Pack hand/foot warmers.' },
                rainy: { icon: '‚òî', title: 'Stay Dry', content: 'Pack clothes in plastic bags inside your luggage. Bring quick-dry options.' }
            };
            
            if (tipsByType[tripData.type]) {
                tipsByType[tripData.type].forEach(tip => {
                    tips += `
                        <div class="tip-card">
                            <div class="tip-header">${tip.icon} ${tip.title}</div>
                            <div class="tip-content">${tip.content}</div>
                        </div>
                    `;
                });
            }
            
            if (climateTips[tripData.climate]) {
                const tip = climateTips[tripData.climate];
                tips += `
                    <div class="tip-card">
                        <div class="tip-header">${tip.icon} ${tip.title}</div>
                        <div class="tip-content">${tip.content}</div>
                    </div>
                `;
            }
            
            // Add general tip
            tips += `
                <div class="tip-card">
                    <div class="tip-header">üì∏ Document Protection</div>
                    <div class="tip-content">Email yourself copies of important documents and save them offline on your phone.</div>
                </div>
            `;
            
            tips += `
                    </div>
                </div>
            `;
            
            return tips;
        }

        // Toggle checkbox
        function toggleCheck(itemId) {
            const checkbox = document.getElementById(itemId);
            checkbox.classList.toggle('checked');
        }

        // Print packing list
        function printPackingList() {
            window.print();
        }