<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mortgage Calculator with Amortization Schedule - Home Loan Payment Calculator</title>
    <meta name="description" content="Calculate mortgage payments instantly. See monthly payments, total interest, amortization schedule, and affordability. Compare loan scenarios and download payment schedules.">
    <meta name="keywords" content="mortgage calculator, home loan calculator, mortgage payment calculator, amortization calculator, house payment calculator, mortgage rates calculator, home affordability calculator">
    
    <!-- Open Graph Tags -->
    <meta property="og:title" content="Free Mortgage Calculator - Calculate Home Loan Payments & Amortization">
    <meta property="og:description" content="Calculate your monthly mortgage payment, see full amortization schedule, compare loan scenarios. Know exactly what you can afford before buying.">
    <meta property="og:type" content="website">
    <meta property="og:image" content="https://yoursite.com/mortgage-calculator-preview.jpg">
    
    <!-- Schema Markup -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "Mortgage Calculator with Amortization Schedule",
        "description": "Calculate mortgage payments, interest, and complete amortization schedules for home loans",
        "url": "https://yoursite.com/tools/mortgage-calculator",
        "applicationCategory": "FinanceApplication",
        "operatingSystem": "All",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "USD"
        }
    }
    </script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        :root {
            --primary: #2563eb;
            --primary-dark: #1d4ed8;
            --secondary: #7c3aed;
            --accent: #10b981;
            --danger: #ef4444;
            --warning: #f59e0b;
            --info: #3b82f6;
            --success: #10b981;
            --background: #f8fafc;
            --card-bg: #ffffff;
            --text-primary: #0f172a;
            --text-secondary: #64748b;
            --border: #e2e8f0;
            --gradient-primary: linear-gradient(135deg, #2563eb 0%, #7c3aed 100%);
            --gradient-success: linear-gradient(135deg, #10b981 0%, #14b8a6 100%);
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            color: var(--text-primary);
            background-color: var(--background);
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background: var(--gradient-primary);
            color: white;
            padding: 60px 24px;
            text-align: center;
            border-radius: 24px;
            margin-bottom: 40px;
            position: relative;
            overflow: hidden;
        }
        
        header::before {
            content: 'üè†';
            position: absolute;
            font-size: 200px;
            opacity: 0.1;
            top: -50px;
            right: -50px;
            transform: rotate(-15deg);
        }
        
        header::after {
            content: 'üí∞';
            position: absolute;
            font-size: 150px;
            opacity: 0.1;
            bottom: -40px;
            left: -30px;
            transform: rotate(20deg);
        }
        
        h1 {
            font-size: 3.5rem;
            margin-bottom: 16px;
            font-weight: 800;
            position: relative;
            z-index: 1;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }
        
        .subtitle {
            font-size: 1.3rem;
            opacity: 0.95;
            max-width: 600px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }
        
        .calculator-grid {
            display: grid;
            grid-template-columns: 1fr 1.5fr;
            gap: 30px;
            margin-bottom: 40px;
        }
        
        @media (max-width: 968px) {
            .calculator-grid {
                grid-template-columns: 1fr;
            }
        }
        
        .card {
            background: var(--card-bg);
            border-radius: 24px;
            padding: 36px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.08);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-2px);
            box-shadow: 0 20px 60px rgba(0,0,0,0.12);
        }
        
        .card-header {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 32px;
            padding-bottom: 24px;
            border-bottom: 2px solid var(--border);
        }
        
        .card-icon {
            width: 56px;
            height: 56px;
            background: var(--gradient-primary);
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            color: white;
            box-shadow: 0 8px 20px rgba(37, 99, 235, 0.3);
        }
        
        h2 {
            font-size: 1.8rem;
            color: var(--text-primary);
            font-weight: 700;
        }
        
        .input-group {
            margin-bottom: 24px;
        }
        
        label {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 10px;
            font-weight: 600;
            color: var(--text-secondary);
            font-size: 0.95rem;
        }
        
        .tooltip {
            width: 16px;
            height: 16px;
            background: var(--border);
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            color: var(--text-secondary);
            cursor: help;
            position: relative;
        }
        
        .tooltip:hover::after {
            content: attr(data-tip);
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: var(--text-primary);
            color: white;
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 12px;
            white-space: nowrap;
            z-index: 10;
            margin-bottom: 4px;
        }
        
        .input-wrapper {
            position: relative;
            display: flex;
            align-items: center;
        }
        
        .input-prefix {
            position: absolute;
            left: 16px;
            color: var(--text-secondary);
            font-weight: 500;
            font-size: 18px;
        }
        
        .input-suffix {
            position: absolute;
            right: 16px;
            color: var(--text-secondary);
            font-weight: 500;
        }
        
        input[type="number"], input[type="text"], select {
            width: 100%;
            padding: 16px 20px;
            padding-left: 36px;
            border: 2px solid var(--border);
            border-radius: 16px;
            font-size: 18px;
            font-weight: 500;
            transition: all 0.3s ease;
            background: var(--background);
        }
        
        input[type="number"].no-prefix {
            padding-left: 20px;
        }
        
        input[type="number"]:focus, input[type="text"]:focus, select:focus {
            outline: none;
            border-color: var(--primary);
            background: white;
            box-shadow: 0 0 0 4px rgba(37, 99, 235, 0.1);
        }
        
        .slider-input {
            margin-bottom: 24px;
        }
        
        .slider-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }
        
        .slider-value {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--primary);
        }
        
        .slider {
            width: 100%;
            height: 8px;
            border-radius: 4px;
            background: var(--border);
            outline: none;
            -webkit-appearance: none;
        }
        
        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: var(--primary);
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(37, 99, 235, 0.3);
        }
        
        .slider::-moz-range-thumb {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: var(--primary);
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(37, 99, 235, 0.3);
        }
        
        .loan-type-selector {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin-bottom: 24px;
        }
        
        .loan-type-btn {
            padding: 12px 16px;
            border: 2px solid var(--border);
            background: var(--background);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            font-weight: 600;
        }
        
        .loan-type-btn:hover {
            border-color: var(--primary);
            background: white;
        }
        
        .loan-type-btn.active {
            border-color: var(--primary);
            background: var(--primary);
            color: white;
        }
        
        .extra-payments {
            background: var(--background);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 24px;
        }
        
        .toggle-switch {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
        }
        
        .switch {
            position: relative;
            display: inline-block;
            width: 48px;
            height: 24px;
        }
        
        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .switch-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: var(--border);
            transition: .4s;
            border-radius: 24px;
        }
        
        .switch-slider:before {
            position: absolute;
            content: "";
            height: 16px;
            width: 16px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        
        input:checked + .switch-slider {
            background-color: var(--primary);
        }
        
        input:checked + .switch-slider:before {
            transform: translateX(24px);
        }
        
        .calculate-btn {
            width: 100%;
            padding: 20px 32px;
            background: var(--gradient-primary);
            color: white;
            border: none;
            border-radius: 16px;
            font-size: 1.2rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            box-shadow: 0 8px 20px rgba(37, 99, 235, 0.3);
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .calculate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 30px rgba(37, 99, 235, 0.4);
        }
        
        .payment-display {
            background: linear-gradient(135deg, rgba(37, 99, 235, 0.1) 0%, rgba(124, 58, 237, 0.05) 100%);
            border-radius: 24px;
            padding: 36px;
            text-align: center;
            margin-bottom: 32px;
        }
        
        .monthly-payment {
            font-size: 4rem;
            font-weight: 800;
            color: var(--primary);
            line-height: 1;
            margin-bottom: 8px;
        }
        
        .payment-label {
            color: var(--text-secondary);
            font-size: 1.1rem;
            margin-bottom: 20px;
        }
        
        .payment-breakdown {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
            margin-top: 24px;
        }
        
        .breakdown-item {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid var(--border);
        }
        
        .breakdown-label {
            color: var(--text-secondary);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .breakdown-value {
            font-weight: 700;
            color: var(--text-primary);
        }
        
        .summary-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 32px;
        }
        
        .summary-card {
            background: white;
            padding: 24px;
            border-radius: 16px;
            text-align: center;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }
        
        .summary-card:hover {
            border-color: var(--primary);
            transform: translateY(-2px);
        }
        
        .summary-value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 4px;
        }
        
        .summary-label {
            color: var(--text-secondary);
            font-size: 0.95rem;
        }
        
        .chart-container {
            background: white;
            border-radius: 20px;
            padding: 32px;
            margin-bottom: 32px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
        }
        
        .chart-tabs {
            display: flex;
            gap: 12px;
            margin-bottom: 24px;
            border-bottom: 2px solid var(--border);
        }
        
        .chart-tab {
            padding: 12px 24px;
            background: none;
            border: none;
            border-bottom: 3px solid transparent;
            cursor: pointer;
            font-weight: 600;
            color: var(--text-secondary);
            transition: all 0.3s ease;
        }
        
        .chart-tab.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
        }
        
        #paymentChart {
            height: 300px;
        }
        
        .amortization-section {
            margin-top: 32px;
        }
        
        .amortization-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .year-selector {
            display: flex;
            gap: 8px;
        }
        
        .year-btn {
            padding: 8px 16px;
            border: 1px solid var(--border);
            background: white;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
        }
        
        .year-btn.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }
        
        .download-btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 12px 24px;
            background: var(--gradient-success);
            color: white;
            border: none;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .download-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.4);
        }
        
        .amortization-table {
            width: 100%;
            background: white;
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
        }
        
        .table-header {
            display: grid;
            grid-template-columns: 1fr 2fr 1.5fr 1.5fr 1.5fr 2fr;
            padding: 16px 24px;
            background: var(--gradient-primary);
            color: white;
            font-weight: 600;
        }
        
        .table-row {
            display: grid;
            grid-template-columns: 1fr 2fr 1.5fr 1.5fr 1.5fr 2fr;
            padding: 16px 24px;
            border-bottom: 1px solid var(--border);
            transition: background 0.3s ease;
        }
        
        .table-row:hover {
            background: var(--background);
        }
        
        .table-row.year-summary {
            background: var(--background);
            font-weight: 600;
        }
        
        .comparison-section {
            background: rgba(124, 58, 237, 0.05);
            border-radius: 20px;
            padding: 32px;
            margin-top: 32px;
        }
        
        .comparison-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 24px;
        }
        
        .comparison-icon {
            width: 48px;
            height: 48px;
            background: var(--gradient-primary);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: white;
        }
        
        .scenario-inputs {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
            margin-bottom: 24px;
        }
        
        .info-section {
            background: white;
            border-radius: 24px;
            padding: 48px;
            margin-bottom: 40px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.08);
        }
        
        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 36px;
            margin-top: 36px;
        }
        
        .info-card {
            padding: 32px;
            background: var(--background);
            border-radius: 20px;
            transition: transform 0.3s ease;
            border-left: 4px solid var(--primary);
        }
        
        .info-card:hover {
            transform: translateX(4px);
        }
        
        .info-card h3 {
            color: var(--text-primary);
            margin-bottom: 16px;
            font-size: 1.3rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .donut-chart {
            width: 200px;
            height: 200px;
            margin: 0 auto;
        }
        
        .hidden {
            display: none;
        }
        
        @media (max-width: 768px) {
            h1 {
                font-size: 2.5rem;
            }
            
            .card {
                padding: 24px;
            }
            
            .monthly-payment {
                font-size: 3rem;
            }
            
            .loan-type-selector {
                grid-template-columns: 1fr;
            }
            
            .table-header, .table-row {
                font-size: 0.85rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Mortgage Calculator</h1>
            <p class="subtitle">Calculate your monthly payment and see the complete amortization schedule</p>
        </header>
        
        <div class="calculator-grid">
            <div class="card">
                <div class="card-header">
                    <div class="card-icon">üí∞</div>
                    <h2>Loan Details</h2>
                </div>
                
                <div class="input-group">
                    <label for="homePrice">
                        Home Price
                        <span class="tooltip" data-tip="Total purchase price of the home">?</span>
                    </label>
                    <div class="input-wrapper">
                        <span class="input-prefix">$</span>
                        <input type="number" id="homePrice" value="400000" min="0" step="1000">
                    </div>
                </div>
                
                <div class="slider-input">
                    <div class="slider-header">
                        <label for="downPayment">Down Payment</label>
                        <span class="slider-value" id="downPaymentDisplay">$80,000 (20%)</span>
                    </div>
                    <input type="range" class="slider" id="downPayment" min="0" max="100" value="20" step="1">
                </div>
                
                <div class="input-group">
                    <label for="interestRate">
                        Interest Rate
                        <span class="tooltip" data-tip="Annual interest rate (APR)">?</span>
                    </label>
                    <div class="input-wrapper">
                        <input type="number" id="interestRate" class="no-prefix" value="6.5" min="0" max="20" step="0.1">
                        <span class="input-suffix">%</span>
                    </div>
                </div>
                
                <div class="input-group">
                    <label>Loan Term</label>
                    <div class="loan-type-selector">
                        <button class="loan-type-btn" onclick="setLoanTerm(15)">15 Years</button>
                        <button class="loan-type-btn active" onclick="setLoanTerm(30)">30 Years</button>
                        <button class="loan-type-btn" onclick="setLoanTerm(0)">Custom</button>
                    </div>
                    <input type="number" id="customYears" class="hidden no-prefix" placeholder="Enter years" min="1" max="40">
                </div>
                
                <div class="input-group">
                    <label for="propertyTax">
                        Annual Property Tax
                        <span class="tooltip" data-tip="Yearly property tax amount">?</span>
                    </label>
                    <div class="input-wrapper">
                        <span class="input-prefix">$</span>
                        <input type="number" id="propertyTax" value="4800" min="0" step="100">
                    </div>
                </div>
                
                <div class="input-group">
                    <label for="homeInsurance">
                        Annual Home Insurance
                        <span class="tooltip" data-tip="Yearly homeowners insurance">?</span>
                    </label>
                    <div class="input-wrapper">
                        <span class="input-prefix">$</span>
                        <input type="number" id="homeInsurance" value="1200" min="0" step="50">
                    </div>
                </div>
                
                <div class="input-group">
                    <label for="hoaFees">
                        Monthly HOA Fees
                        <span class="tooltip" data-tip="Homeowners association fees">?</span>
                    </label>
                    <div class="input-wrapper">
                        <span class="input-prefix">$</span>
                        <input type="number" id="hoaFees" value="0" min="0" step="25">
                    </div>
                </div>
                
                <div class="input-group">
                    <label for="pmi">
                        Monthly PMI
                        <span class="tooltip" data-tip="Private mortgage insurance if down payment < 20%">?</span>
                    </label>
                    <div class="input-wrapper">
                        <span class="input-prefix">$</span>
                        <input type="number" id="pmi" value="0" min="0" step="25">
                    </div>
                </div>
                
                <div class="extra-payments">
                    <div class="toggle-switch">
                        <label class="switch">
                            <input type="checkbox" id="extraPaymentToggle" onchange="toggleExtraPayments()">
                            <span class="switch-slider"></span>
                        </label>
                        <label for="extraPaymentToggle" style="margin: 0;">Include Extra Payments</label>
                    </div>
                    <div id="extraPaymentInput" class="hidden">
                        <label for="extraPayment">Monthly Extra Payment</label>
                        <div class="input-wrapper">
                            <span class="input-prefix">$</span>
                            <input type="number" id="extraPayment" value="0" min="0" step="50">
                        </div>
                    </div>
                </div>
                
                <button class="calculate-btn" onclick="calculateMortgage()">
                    <span>Calculate Payment</span>
                    <span>üè†</span>
                </button>
            </div>
            
            <div id="results" class="card hidden">
                <div class="payment-display">
                    <div class="monthly-payment" id="monthlyPayment">$0</div>
                    <div class="payment-label">Total Monthly Payment</div>
                    
                    <div class="payment-breakdown">
                        <div class="breakdown-item">
                            <span class="breakdown-label">
                                <span style="width: 12px; height: 12px; background: var(--primary); border-radius: 50%; display: inline-block;"></span>
                                Principal & Interest
                            </span>
                            <span class="breakdown-value" id="principalInterest">$0</span>
                        </div>
                        <div class="breakdown-item">
                            <span class="breakdown-label">
                                <span style="width: 12px; height: 12px; background: var(--warning); border-radius: 50%; display: inline-block;"></span>
                                Property Tax
                            </span>
                            <span class="breakdown-value" id="monthlyPropertyTax">$0</span>
                        </div>
                        <div class="breakdown-item">
                            <span class="breakdown-label">
                                <span style="width: 12px; height: 12px; background: var(--info); border-radius: 50%; display: inline-block;"></span>
                                Home Insurance
                            </span>
                            <span class="breakdown-value" id="monthlyInsurance">$0</span>
                        </div>
                        <div class="breakdown-item">
                            <span class="breakdown-label">
                                <span style="width: 12px; height: 12px; background: var(--secondary); border-radius: 50%; display: inline-block;"></span>
                                HOA & PMI
                            </span>
                            <span class="breakdown-value" id="monthlyHoaPmi">$0</span>
                        </div>
                    </div>
                </div>
                
                <div class="summary-cards">
                    <div class="summary-card">
                        <div class="summary-value" id="loanAmount">$0</div>
                        <div class="summary-label">Loan Amount</div>
                    </div>
                    <div class="summary-card">
                        <div class="summary-value" id="totalInterest">$0</div>
                        <div class="summary-label">Total Interest Paid</div>
                    </div>
                    <div class="summary-card">
                        <div class="summary-value" id="totalPaid">$0</div>
                        <div class="summary-label">Total Amount Paid</div>
                    </div>
                    <div class="summary-card">
                        <div class="summary-value" id="payoffDate">Jan 2054</div>
                        <div class="summary-label">Payoff Date</div>
                    </div>
                </div>
                
                <div class="chart-container">
                    <div class="chart-tabs">
                        <button class="chart-tab active" onclick="showChart('breakdown')">Payment Breakdown</button>
                        <button class="chart-tab" onclick="showChart('balance')">Loan Balance Over Time</button>
                        <button class="chart-tab" onclick="showChart('equity')">Equity Growth</button>
                    </div>
                    <canvas id="paymentChart"></canvas>
                </div>
                
                <div class="amortization-section">
                    <div class="amortization-controls">
                        <h3>Amortization Schedule</h3>
                        <button class="download-btn" onclick="downloadSchedule()">
                            <span>üì•</span>
                            <span>Download Schedule</span>
                        </button>
                    </div>
                    <div class="year-selector" id="yearSelector">
                        <!-- Year buttons will be inserted here -->
                    </div>
                    <div class="amortization-table">
                        <div class="table-header">
                            <div>Month</div>
                            <div>Payment</div>
                            <div>Principal</div>
                            <div>Interest</div>
                            <div>Total Interest</div>
                            <div>Balance</div>
                        </div>
                        <div id="amortizationRows">
                            <!-- Rows will be inserted here -->
                        </div>
                    </div>
                </div>
                
                <div class="comparison-section">
                    <div class="comparison-header">
                        <div class="comparison-icon">üîÑ</div>
                        <h3>Compare Scenarios</h3>
                    </div>
                    <div class="scenario-inputs">
                        <div>
                            <label>Extra Monthly Payment</label>
                            <input type="number" id="compareExtra" placeholder="$500" min="0">
                        </div>
                        <div>
                            <label>Different Rate</label>
                            <input type="number" id="compareRate" placeholder="5.5%" min="0" max="20" step="0.1">
                        </div>
                        <div>
                            <label>Different Term</label>
                            <select id="compareTerm">
                                <option value="15">15 Years</option>
                                <option value="30">30 Years</option>
                            </select>
                        </div>
                    </div>
                    <button class="calculate-btn" style="background: var(--gradient-success);" onclick="compareScenarios()">
                        Compare Scenarios
                    </button>
                    <div id="comparisonResults" class="hidden">
                        <!-- Comparison results will be inserted here -->
                    </div>
                </div>
            </div>
        </div>
        
        <div class="info-section">
            <h2>Understanding Your Mortgage</h2>
            <p style="color: var(--text-secondary); font-size: 1.1rem; margin-bottom: 24px;">
                Make informed decisions about the biggest purchase of your life with our comprehensive mortgage guide.
            </p>
            
            <div class="info-grid">
                <div class="info-card">
                    <h3>
                        <span>üìä</span>
                        How Mortgages Work
                    </h3>
                    <p style="color: var(--text-secondary); line-height: 1.8;">
                        A mortgage is a loan used to purchase real estate. You'll pay back the loan amount (principal) plus interest over a set period. In the early years, most of your payment goes toward interest, but this shifts toward principal over time.
                    </p>
                    <div style="background: white; padding: 20px; border-radius: 12px; margin-top: 16px;">
                        <strong>Key Components:</strong>
                        <ul style="margin: 8px 0 0 20px; color: var(--text-secondary);">
                            <li>Principal: Amount borrowed</li>
                            <li>Interest: Cost of borrowing</li>
                            <li>Term: Length of loan</li>
                            <li>Down payment: Initial payment</li>
                        </ul>
                    </div>
                </div>
                
                <div class="info-card">
                    <h3>
                        <span>üí°</span>
                        Smart Mortgage Tips
                    </h3>
                    <ul style="list-style: none; margin: 0; padding: 0;">
                        <li style="padding: 12px 0; display: flex; align-items: flex-start; gap: 12px; border-bottom: 1px solid var(--border);">
                            <span style="color: var(--success);">‚úì</span>
                            <div>
                                <strong>20% Down = No PMI:</strong> Avoid private mortgage insurance
                            </div>
                        </li>
                        <li style="padding: 12px 0; display: flex; align-items: flex-start; gap: 12px; border-bottom: 1px solid var(--border);">
                            <span style="color: var(--success);">‚úì</span>
                            <div>
                                <strong>Shop Around:</strong> 0.5% rate difference saves thousands
                            </div>
                        </li>
                        <li style="padding: 12px 0; display: flex; align-items: flex-start; gap: 12px; border-bottom: 1px solid var(--border);">
                            <span style="color: var(--success);">‚úì</span>
                            <div>
                                <strong>Extra Payments:</strong> One extra payment/year saves years
                            </div>
                        </li>
                        <li style="padding: 12px 0; display: flex; align-items: flex-start; gap: 12px;">
                            <span style="color: var(--success);">‚úì</span>
                            <div>
                                <strong>28/36 Rule:</strong> Keep housing costs under 28% of income
                            </div>
                        </li>
                    </ul>
                </div>
                
                <div class="info-card">
                    <h3>
                        <span>üè¶</span>
                        Types of Mortgages
                    </h3>
                    <div style="margin-top: 16px;">
                        <div style="padding: 12px 0; border-bottom: 1px solid var(--border);">
                            <strong style="color: var(--primary);">Fixed-Rate</strong>
                            <p style="font-size: 0.9rem; color: var(--text-secondary); margin-top: 4px;">
                                Same rate for entire loan term. Predictable payments.
                            </p>
                        </div>
                        <div style="padding: 12px 0; border-bottom: 1px solid var(--border);">
                            <strong style="color: var(--secondary);">Adjustable-Rate (ARM)</strong>
                            <p style="font-size: 0.9rem; color: var(--text-secondary); margin-top: 4px;">
                                Rate changes after initial period. Lower starting rate.
                            </p>
                        </div>
                        <div style="padding: 12px 0; border-bottom: 1px solid var(--border);">
                            <strong style="color: var(--info);">FHA Loan</strong>
                            <p style="font-size: 0.9rem; color: var(--text-secondary); margin-top: 4px;">
                                Lower down payment (3.5%). Good for first-time buyers.
                            </p>
                        </div>
                        <div style="padding: 12px 0;">
                            <strong style="color: var(--warning);">VA Loan</strong>
                            <p style="font-size: 0.9rem; color: var(--text-secondary); margin-top: 4px;">
                                No down payment for eligible veterans. No PMI.
                            </p>
                        </div>
                    </div>
                </div>
                
                <div class="info-card">
                    <h3>
                        <span>üìà</span>
                        Building Equity Faster
                    </h3>
                    <p style="color: var(--text-secondary); margin-bottom: 16px;">
                        Accelerate your path to homeownership:
                    </p>
                    <div style="background: rgba(16, 185, 129, 0.1); padding: 20px; border-radius: 12px;">
                        <ul style="margin: 0; padding-left: 20px; color: var(--text-secondary);">
                            <li>Bi-weekly payments = 13 payments/year</li>
                            <li>Round up payments to nearest $100</li>
                            <li>Apply windfalls to principal</li>
                            <li>Refinance when rates drop 1%+</li>
                            <li>Make one extra payment annually</li>
                        </ul>
                    </div>
                </div>
                
                <div class="info-card">
                    <h3>
                        <span>‚ö†Ô∏è</span>
                        Common Mistakes to Avoid
                    </h3>
                    <ul style="list-style: none; margin: 0; padding: 0;">
                        <li style="padding: 8px 0; color: var(--danger);">
                            ‚ùå Buying more house than you can afford
                        </li>
                        <li style="padding: 8px 0; color: var(--danger);">
                            ‚ùå Ignoring closing costs (2-5% of home price)
                        </li>
                        <li style="padding: 8px 0; color: var(--danger);">
                            ‚ùå Not shopping for best rates
                        </li>
                        <li style="padding: 8px 0; color: var(--danger);">
                            ‚ùå Skipping home inspection
                        </li>
                        <li style="padding: 8px 0; color: var(--danger);">
                            ‚ùå Forgetting about maintenance costs
                        </li>
                    </ul>
                </div>
                
                <div class="info-card">
                    <h3>
                        <span>üéØ</span>
                        Affordability Guidelines
                    </h3>
                    <div style="background: white; border-radius: 12px; padding: 20px; margin-top: 16px; text-align: center;">
                        <div style="font-size: 3rem; font-weight: 700; color: var(--primary); margin-bottom: 8px;">28%</div>
                        <div style="color: var(--text-secondary); margin-bottom: 16px;">Maximum housing expense ratio</div>
                        <div style="font-size: 3rem; font-weight: 700; color: var(--secondary); margin-bottom: 8px;">36%</div>
                        <div style="color: var(--text-secondary);">Maximum total debt ratio</div>
                    </div>
                    <p style="margin-top: 16px; font-size: 0.9rem; color: var(--text-secondary);">
                        Lenders typically want your monthly housing costs below 28% of gross income and total debt below 36%.
                    </p>
                </div>
            </div>
        </div>
    </div>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <script>
        let currentLoanTerm = 30;
        let currentChart = null;
        let amortizationSchedule = [];
        
        // Update down payment display
        document.getElementById('downPayment').addEventListener('input', function(e) {
            const homePrice = parseFloat(document.getElementById('homePrice').value) || 0;
            const percent = parseFloat(e.target.value);
            const amount = (homePrice * percent / 100);
            document.getElementById('downPaymentDisplay').textContent = 
                `$${amount.toLocaleString()} (${percent}%)`;
            
            // Auto-calculate PMI
            if (percent < 20) {
                const loanAmount = homePrice - amount;
                const pmi = Math.round(loanAmount * 0.005 / 12); // 0.5% annually
                document.getElementById('pmi').value = pmi;
            } else {
                document.getElementById('pmi').value = 0;
            }
        });
        
        // Update down payment when home price changes
        document.getElementById('homePrice').addEventListener('input', function() {
            document.getElementById('downPayment').dispatchEvent(new Event('input'));
        });
        
        function setLoanTerm(years) {
            currentLoanTerm = years;
            
            // Update UI
            document.querySelectorAll('.loan-type-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Show/hide custom input
            if (years === 0) {
                document.getElementById('customYears').classList.remove('hidden');
                document.getElementById('customYears').focus();
            } else {
                document.getElementById('customYears').classList.add('hidden');
            }
        }
        
        function toggleExtraPayments() {
            const extraInput = document.getElementById('extraPaymentInput');
            const toggle = document.getElementById('extraPaymentToggle');
            
            if (toggle.checked) {
                extraInput.classList.remove('hidden');
            } else {
                extraInput.classList.add('hidden');
                document.getElementById('extraPayment').value = 0;
            }
        }
        
        function calculateMortgage() {
            // Get values
            const homePrice = parseFloat(document.getElementById('homePrice').value) || 0;
            const downPaymentPercent = parseFloat(document.getElementById('downPayment').value) || 0;
            const downPayment = homePrice * downPaymentPercent / 100;
            const loanAmount = homePrice - downPayment;
            const interestRate = parseFloat(document.getElementById('interestRate').value) || 0;
            const monthlyRate = interestRate / 100 / 12;
            
            let loanTermYears = currentLoanTerm;
            if (currentLoanTerm === 0) {
                loanTermYears = parseFloat(document.getElementById('customYears').value) || 30;
            }
            const loanTermMonths = loanTermYears * 12;
            
            // Calculate monthly payment (principal + interest)
            let monthlyPI = 0;
            if (monthlyRate > 0) {
                monthlyPI = loanAmount * (monthlyRate * Math.pow(1 + monthlyRate, loanTermMonths)) / 
                           (Math.pow(1 + monthlyRate, loanTermMonths) - 1);
            } else {
                monthlyPI = loanAmount / loanTermMonths;
            }
            
            // Get other monthly costs
            const propertyTax = parseFloat(document.getElementById('propertyTax').value) || 0;
            const homeInsurance = parseFloat(document.getElementById('homeInsurance').value) || 0;
            const hoaFees = parseFloat(document.getElementById('hoaFees').value) || 0;
            const pmi = parseFloat(document.getElementById('pmi').value) || 0;
            const extraPayment = parseFloat(document.getElementById('extraPayment').value) || 0;
            
            const monthlyPropertyTax = propertyTax / 12;
            const monthlyInsurance = homeInsurance / 12;
            const totalMonthly = monthlyPI + monthlyPropertyTax + monthlyInsurance + hoaFees + pmi;
            
            // Update display
            document.getElementById('monthlyPayment').textContent = '$' + Math.round(totalMonthly).toLocaleString();
            document.getElementById('principalInterest').textContent = '$' + Math.round(monthlyPI).toLocaleString();
            document.getElementById('monthlyPropertyTax').textContent = '$' + Math.round(monthlyPropertyTax).toLocaleString();
            document.getElementById('monthlyInsurance').textContent = '$' + Math.round(monthlyInsurance).toLocaleString();
            document.getElementById('monthlyHoaPmi').textContent = '$' + Math.round(hoaFees + pmi).toLocaleString();
            
            // Calculate totals
            const totalInterest = (monthlyPI * loanTermMonths) - loanAmount;
            const totalPaid = monthlyPI * loanTermMonths;
            
            // Calculate payoff date
            const today = new Date();
            const payoffDate = new Date(today.setMonth(today.getMonth() + loanTermMonths));
            const monthNames = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
            
            document.getElementById('loanAmount').textContent = '$' + Math.round(loanAmount).toLocaleString();
            document.getElementById('totalInterest').textContent = '$' + Math.round(totalInterest).toLocaleString();
            document.getElementById('totalPaid').textContent = '$' + Math.round(totalPaid).toLocaleString();
            document.getElementById('payoffDate').textContent = monthNames[payoffDate.getMonth()] + ' ' + payoffDate.getFullYear();
            
            // Generate amortization schedule
            generateAmortization(loanAmount, monthlyRate, loanTermMonths, monthlyPI, extraPayment);
            
            // Show results
            document.getElementById('results').classList.remove('hidden');
            showChart('breakdown');
            
            // Scroll to results
            document.getElementById('results').scrollIntoView({ behavior: 'smooth', block: 'start' });
        }
        
        function generateAmortization(loanAmount, monthlyRate, months, monthlyPayment, extraPayment) {
            amortizationSchedule = [];
            let balance = loanAmount;
            let totalInterest = 0;
            
            for (let i = 1; i <= months && balance > 0; i++) {
                const interestPayment = balance * monthlyRate;
                let principalPayment = monthlyPayment - interestPayment + extraPayment;
                
                // Don't overpay
                if (principalPayment > balance) {
                    principalPayment = balance;
                }
                
                balance -= principalPayment;
                totalInterest += interestPayment;
                
                amortizationSchedule.push({
                    month: i,
                    payment: principalPayment + interestPayment,
                    principal: principalPayment,
                    interest: interestPayment,
                    totalInterest: totalInterest,
                    balance: Math.max(0, balance)
                });
                
                if (balance <= 0) break;
            }
            
            // Generate year selector
            const years = Math.ceil(amortizationSchedule.length / 12);
            const yearSelector = document.getElementById('yearSelector');
            yearSelector.innerHTML = '<button class="year-btn active" onclick="showYear(0)">All Years</button>';
            
            for (let i = 1; i <= years; i++) {
                yearSelector.innerHTML += `<button class="year-btn" onclick="showYear(${i})">Year ${i}</button>`;
            }
            
            showYear(0);
        }
        
        function showYear(year) {
            // Update UI
            document.querySelectorAll('.year-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            const tbody = document.getElementById('amortizationRows');
            tbody.innerHTML = '';
            
            if (year === 0) {
                // Show yearly summaries
                let yearlyData = {};
                amortizationSchedule.forEach(row => {
                    const y = Math.ceil(row.month / 12);
                    if (!yearlyData[y]) {
                        yearlyData[y] = {
                            payments: 0,
                            principal: 0,
                            interest: 0,
                            endBalance: row.balance
                        };
                    }
                    yearlyData[y].payments += row.payment;
                    yearlyData[y].principal += row.principal;
                    yearlyData[y].interest += row.interest;
                    yearlyData[y].endBalance = row.balance;
                });
                
                Object.keys(yearlyData).forEach(y => {
                    const data = yearlyData[y];
                    tbody.innerHTML += `
                        <div class="table-row year-summary">
                            <div>Year ${y}</div>
                            <div>$${Math.round(data.payments).toLocaleString()}</div>
                            <div>$${Math.round(data.principal).toLocaleString()}</div>
                            <div>$${Math.round(data.interest).toLocaleString()}</div>
                            <div>-</div>
                            <div>$${Math.round(data.endBalance).toLocaleString()}</div>
                        </div>
                    `;
                });
            } else {
                // Show monthly data for specific year
                const startMonth = (year - 1) * 12;
                const endMonth = Math.min(year * 12, amortizationSchedule.length);
                
                for (let i = startMonth; i < endMonth; i++) {
                    const row = amortizationSchedule[i];
                    tbody.innerHTML += `
                        <div class="table-row">
                            <div>${row.month}</div>
                            <div>$${Math.round(row.payment).toLocaleString()}</div>
                            <div>$${Math.round(row.principal).toLocaleString()}</div>
                            <div>$${Math.round(row.interest).toLocaleString()}</div>
                            <div>$${Math.round(row.totalInterest).toLocaleString()}</div>
                            <div>$${Math.round(row.balance).toLocaleString()}</div>
                        </div>
                    `;
                }
            }
        }
        
        function showChart(type) {
            // Update tabs
            document.querySelectorAll('.chart-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Destroy existing chart
            if (currentChart) {
                currentChart.destroy();
            }
            
            const ctx = document.getElementById('paymentChart').getContext('2d');
            
            if (type === 'breakdown') {
                // Payment breakdown donut chart
                const monthlyPI = parseFloat(document.getElementById('principalInterest').textContent.replace(/[$,]/g, ''));
                const propertyTax = parseFloat(document.getElementById('monthlyPropertyTax').textContent.replace(/[$,]/g, ''));
                const insurance = parseFloat(document.getElementById('monthlyInsurance').textContent.replace(/[$,]/g, ''));
                const hoaPmi = parseFloat(document.getElementById('monthlyHoaPmi').textContent.replace(/[$,]/g, ''));
                
                currentChart = new Chart(ctx, {
                    type: 'doughnut',
                    data: {
                        labels: ['Principal & Interest', 'Property Tax', 'Insurance', 'HOA & PMI'],
                        datasets: [{
                            data: [monthlyPI, propertyTax, insurance, hoaPmi],
                            backgroundColor: ['#2563eb', '#f59e0b', '#3b82f6', '#7c3aed'],
                            borderWidth: 0
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'right',
                                labels: {
                                    padding: 20,
                                    font: {
                                        size: 14
                                    }
                                }
                            },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        return context.label + ': $' + context.parsed.toLocaleString();
                                    }
                                }
                            }
                        }
                    }
                });
            } else if (type === 'balance') {
                // Loan balance over time
                const years = [];
                const balances = [];
                const principals = [];
                const interests = [];
                
                for (let i = 0; i < amortizationSchedule.length; i += 12) {
                    years.push(`Year ${Math.floor(i / 12) + 1}`);
                    balances.push(amortizationSchedule[i].balance);
                    
                    let yearPrincipal = 0;
                    let yearInterest = 0;
                    for (let j = i; j < Math.min(i + 12, amortizationSchedule.length); j++) {
                        yearPrincipal += amortizationSchedule[j].principal;
                        yearInterest += amortizationSchedule[j].interest;
                    }
                    principals.push(yearPrincipal);
                    interests.push(yearInterest);
                }
                
                currentChart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: years,
                        datasets: [{
                            label: 'Remaining Balance',
                            data: balances,
                            borderColor: '#2563eb',
                            backgroundColor: 'rgba(37, 99, 235, 0.1)',
                            tension: 0.4,
                            fill: true
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                display: false
                            },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        return 'Balance: $' + Math.round(context.parsed.y).toLocaleString();
                                    }
                                }
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                ticks: {
                                    callback: function(value) {
                                        return '$' + (value / 1000) + 'k';
                                    }
                                }
                            }
                        }
                    }
                });
            } else if (type === 'equity') {
                // Equity growth
                const homePrice = parseFloat(document.getElementById('homePrice').value);
                const years = [];
                const equity = [];
                
                for (let i = 0; i < amortizationSchedule.length; i += 12) {
                    years.push(`Year ${Math.floor(i / 12) + 1}`);
                    const loanBalance = amortizationSchedule[i].balance;
                    equity.push(homePrice - loanBalance);
                }
                
                currentChart = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: years,
                        datasets: [{
                            label: 'Home Equity',
                            data: equity,
                            backgroundColor: '#10b981',
                            borderRadius: 8
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                display: false
                            },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        return 'Equity: $' + Math.round(context.parsed.y).toLocaleString();
                                    }
                                }
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                ticks: {
                                    callback: function(value) {
                                        return '$' + (value / 1000) + 'k';
                                    }
                                }
                            }
                        }
                    }
                });
            }
        }
        
        function compareScenarios() {
            // This would generate comparison results
            alert('Scenario comparison feature coming soon!');
        }
        
        function downloadSchedule() {
            // In a real implementation, this would generate a CSV or PDF
            alert('Download feature coming soon! The amortization schedule would be exported as a CSV file.');
        }
        
        // Initialize
        document.getElementById('downPayment').dispatchEvent(new Event('input'));
    </script>
</body>
</html>